<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>pyTEM - TEM Architecture</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
<!-- <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.-.min.css"/> -->
<link rel="stylesheet" href="/TEM_architecture/assets/css/style.css"/>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/font-awesome.min.css"> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>

  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <!-- <div class="mdl-layout--fixed-header mdl-layout__header--scroll"> -->
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">
        <a href="/TEM_architecture/">TEM Architecture</a>
      </span>
      <div class="mdl-layout-spacer mdl-layout--large-screen-only"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        
          <a class="mdl-navigation__link" href="/TEM_architecture/topics.html">Topics</a>
        
          <a class="mdl-navigation__link" href="/TEM_architecture/assignments.html">Assignments</a>
        
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">TEM Architecture</span>
    <nav class="mdl-navigation">
      
        <a class="mdl-navigation__link" href="/TEM_architecture/topics.html">Topics</a>
        
      
        <a class="mdl-navigation__link" href="/TEM_architecture/assignments.html">Assignments</a>
        
      
        <a class="mdl-navigation__link" href="/TEM_architecture/unassigned.html">Unassigned</a>
        
      
    </nav>
  </div>
<!-- </div> -->

      <main class="mdl-layout__content">
        <div class="mdl-grid page-container">
    <div class="mdl-card mdl-cell--12-col mdl-shadow--4dp">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title--text">
                pyTEM
            </h2>
        </div>
        
  <div class="mdl-card__supporting-text mdl-card--border">
    
      <p style="font-size: large;" class="mdl-card__subtitle-text">
        <i style="color:black;" class="fab fa-github"></i>
        <a href="https://github.com/AllenInstitute/pytem">AllenInstitute/pytem</a>
      </p>
    
    
      
      <p class="mdl-card__subtitle-text contributor-info">
        Assigned: Cameron Devine
        
          <a href="https://github.com/CameronDevine"><i class="fab fa-github"></i></a>
          <a href="mailto:cameron.devine@alleninstitute.org"><i class="fa fa-envelope"></i></a>
          <a href="https://aianatomy.slack.com/team/U06Q6V475JQ"><i class="fab fa-slack"></i></a></p>
    
    
      <h3>Sends</h3>
      <ul>
        
        
          <li><a href="/TEM_architecture/topics.html#camera-command">camera.command</a></li>
        
          <li><a href="/TEM_architecture/topics.html#camera-settings">camera.settings</a></li>
        
          <li><a href="/TEM_architecture/topics.html#montage-finished">montage.finished</a></li>
        
          <li><a href="/TEM_architecture/topics.html#montage-start">montage.start</a></li>
        
          <li><a href="/TEM_architecture/topics.html#scope-command">scope.command</a></li>
        
          <li><a href="/TEM_architecture/topics.html#stage-aperture-command">stage.aperture.command</a></li>
        
          <li><a href="/TEM_architecture/topics.html#stage-motion-command">stage.motion.command</a></li>
        
          <li><a href="/TEM_architecture/topics.html#stage-rotation-command">stage.rotation.command</a></li>
        
          <li><a href="/TEM_architecture/topics.html#tile-raw">tile.raw</a></li>
        
      </ul>
    
    
      <h3>Receives</h3>
      <ul>
        
        
          <li><a href="/TEM_architecture/topics.html#camera-image">camera.image</a></li>
        
          <li><a href="/TEM_architecture/topics.html#camera-status">camera.status</a></li>
        
          <li><a href="/TEM_architecture/topics.html#qc-status">qc.status</a></li>
        
          <li><a href="/TEM_architecture/topics.html#scope-status">scope.status</a></li>
        
          <li><a href="/TEM_architecture/topics.html#stage-aperture-status">stage.aperture.status</a></li>
        
          <li><a href="/TEM_architecture/topics.html#stage-motion-status">stage.motion.status</a></li>
        
          <li><a href="/TEM_architecture/topics.html#stage-rotation-status">stage.rotation.status</a></li>
        
      </ul>
    
  </div>

<div class="mdl-card__supporting-text">
  
  <p>pyTEM is the main hierarchical state machine orchestrating all the components.
This service uses the <a href="https://pigeon.readthedocs.io/en/latest/">Pigeon</a> client for communication via the <a href="/TEM_architecture/broker.html">message broker</a>.
Furthermore, a <a href="https://github.com/AllenInstitute/pigeon-transitions">library</a> integrating Pigeon and the Python <a href="https://github.com/pytransitions/transitions">Transitions</a> library to allow easy creation of the state machine.
This library can also create a state transition diagrams of the state machine:</p>

<p><a href="/TEM_architecture/graph.png"><img src="/TEM_architecture/graph.png" alt="State Diagram" /></a></p>

<h2 id="simplified-state-diagram">Simplified State Diagram</h2>

<p>A simplified version of this schematic is:</p>

<div class="diagram"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0.00 0.00 2110.00 1931.00">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(144 1787)">
<title>%3</title>
<g id="clust1" class="cluster">
<title>cluster_Preview</title>
<path fill="#e5f5fd" stroke="#aeb6be" d="M20,-344C20,-344 268,-344 268,-344 274,-344 280,-350 280,-356 280,-356 280,-1623 280,-1623 280,-1629 274,-1635 268,-1635 268,-1635 20,-1635 20,-1635 14,-1635 8,-1629 8,-1623 8,-1623 8,-356 8,-356 8,-350 14,-344 20,-344" />
<text text-anchor="middle" x="39" y="-1621.4" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">Preview</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Acquisition</title>
<path fill="#e5f5fd" stroke="#aeb6be" d="M175,-8C175,-8 1671,-8 1671,-8 1677,-8 1683,-14 1683,-20 1683,-20 1683,-324 1683,-324 1683,-330 1677,-336 1671,-336 1671,-336 175,-336 175,-336 169,-336 163,-330 163,-324 163,-324 163,-20 163,-20 163,-14 169,-8 175,-8" />
<text text-anchor="middle" x="203.5" y="-322.4" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">Acquisition</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Montage</title>
<path fill="#ebf3e7" stroke="#aeb6be" d="M1415,-152C1415,-152 1663,-152 1663,-152 1669,-152 1675,-158 1675,-164 1675,-164 1675,-279 1675,-279 1675,-285 1669,-291 1663,-291 1663,-291 1415,-291 1415,-291 1409,-291 1403,-285 1403,-279 1403,-279 1403,-164 1403,-164 1403,-158 1409,-152 1415,-152" />
<text text-anchor="middle" x="1437.5" y="-277.4" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">Montage</text>
</g>
<!-- e09200d504694791a7047d5b4a4da08c -->
<g id="node1" class="node">
<title>e09200d504694791a7047d5b4a4da08c</title>
<g id="a_node1"><a xlink:href="#updateimage" xlink:title="UpdateImage">
<path fill="none" stroke="black" d="M105,-885.5C105,-885.5 28,-885.5 28,-885.5 22,-885.5 16,-879.5 16,-873.5 16,-873.5 16,-796.5 16,-796.5 16,-790.5 22,-784.5 28,-784.5 28,-784.5 105,-784.5 105,-784.5 111,-784.5 117,-790.5 117,-796.5 117,-796.5 117,-873.5 117,-873.5 117,-879.5 111,-885.5 105,-885.5" />
<text text-anchor="middle" x="66.5" y="-788.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">UpdateImage</text>
</a>
</g>
</g>
<!-- f77f09a19bea4d67bc93c965c93748b3 -->
<g id="node2" class="node">
<title>f77f09a19bea4d67bc93c965c93748b3</title>
<g id="a_node2"><a xlink:href="#brightfield" xlink:title="Brightfield">
<path fill="none" stroke="black" d="M260,-453.5C260,-453.5 183,-453.5 183,-453.5 177,-453.5 171,-447.5 171,-441.5 171,-441.5 171,-364.5 171,-364.5 171,-358.5 177,-352.5 183,-352.5 183,-352.5 260,-352.5 260,-352.5 266,-352.5 272,-358.5 272,-364.5 272,-364.5 272,-441.5 272,-441.5 272,-447.5 266,-453.5 260,-453.5" />
<text text-anchor="middle" x="221.5" y="-356.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Brightfield</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;f77f09a19bea4d67bc93c965c93748b3 -->
<g id="edge1" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;f77f09a19bea4d67bc93c965c93748b3</title>
<path fill="none" stroke="#7b8894" d="M88.9,-774.59C118.06,-692.25 169.98,-545.64 199.13,-463.34" />
<polygon fill="#7b8894" stroke="#7b8894" points="85.54,-773.58 85.5,-784.17 92.14,-775.92 85.54,-773.58" />
<polygon fill="#7b8894" stroke="#7b8894" points="202.53,-464.23 202.57,-453.63 195.93,-461.89 202.53,-464.23" />
</g>
<!-- 04983e878264476f8ba0448ef22000b0 -->
<g id="node3" class="node">
<title>04983e878264476f8ba0448ef22000b0</title>
<g id="a_node3"><a xlink:href="#darkfield" xlink:title="Darkfield">
<path fill="none" stroke="black" d="M260,-597.5C260,-597.5 183,-597.5 183,-597.5 177,-597.5 171,-591.5 171,-585.5 171,-585.5 171,-508.5 171,-508.5 171,-502.5 177,-496.5 183,-496.5 183,-496.5 260,-496.5 260,-496.5 266,-496.5 272,-502.5 272,-508.5 272,-508.5 272,-585.5 272,-585.5 272,-591.5 266,-597.5 260,-597.5" />
<text text-anchor="middle" x="221.5" y="-500.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Darkfield</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;04983e878264476f8ba0448ef22000b0 -->
<g id="edge2" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;04983e878264476f8ba0448ef22000b0</title>
<path fill="none" stroke="#7b8894" d="M99.21,-775.31C125.43,-725.95 162.5,-656.17 188.74,-606.78" />
<polygon fill="#7b8894" stroke="#7b8894" points="96.1,-773.7 94.5,-784.17 102.28,-776.99 96.1,-773.7" />
<polygon fill="#7b8894" stroke="#7b8894" points="191.91,-608.27 193.51,-597.8 185.73,-604.99 191.91,-608.27" />
</g>
<!-- 4267241bf45645caac56e200002f2144 -->
<g id="node4" class="node">
<title>4267241bf45645caac56e200002f2144</title>
<g id="a_node4"><a xlink:href="#autofocus" xlink:title="AutoFocus">
<path fill="none" stroke="black" d="M260,-741.5C260,-741.5 183,-741.5 183,-741.5 177,-741.5 171,-735.5 171,-729.5 171,-729.5 171,-652.5 171,-652.5 171,-646.5 177,-640.5 183,-640.5 183,-640.5 260,-640.5 260,-640.5 266,-640.5 272,-646.5 272,-652.5 272,-652.5 272,-729.5 272,-729.5 272,-735.5 266,-741.5 260,-741.5" />
<text text-anchor="middle" x="221.5" y="-644.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">AutoFocus</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;4267241bf45645caac56e200002f2144 -->
<g id="edge3" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;4267241bf45645caac56e200002f2144</title>
<path fill="none" stroke="#7b8894" d="M124.54,-781.32C137.25,-769.36 150.72,-756.67 163.43,-744.71" />
<polygon fill="#7b8894" stroke="#7b8894" points="122.06,-778.84 117.17,-788.25 126.86,-783.94 122.06,-778.84" />
<polygon fill="#7b8894" stroke="#7b8894" points="165.93,-747.17 170.81,-737.76 161.13,-742.07 165.93,-747.17" />
</g>
<!-- 8824c5725a684388971d6abc41e09293 -->
<g id="node5" class="node">
<title>8824c5725a684388971d6abc41e09293</title>
<g id="a_node5"><a xlink:href="#autoexposure" xlink:title="AutoExposure">
<path fill="none" stroke="black" d="M260,-885.5C260,-885.5 183,-885.5 183,-885.5 177,-885.5 171,-879.5 171,-873.5 171,-873.5 171,-796.5 171,-796.5 171,-790.5 177,-784.5 183,-784.5 183,-784.5 260,-784.5 260,-784.5 266,-784.5 272,-790.5 272,-796.5 272,-796.5 272,-873.5 272,-873.5 272,-879.5 266,-885.5 260,-885.5" />
<text text-anchor="middle" x="221.5" y="-788.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">AutoExposure</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;8824c5725a684388971d6abc41e09293 -->
<g id="edge4" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;8824c5725a684388971d6abc41e09293</title>
<path fill="none" stroke="#7b8894" d="M127.45,-835C138.33,-835 149.68,-835 160.56,-835" />
<polygon fill="#7b8894" stroke="#7b8894" points="127.17,-831.5 117.17,-835 127.17,-838.5 127.17,-831.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="160.81,-838.5 170.81,-835 160.81,-831.5 160.81,-838.5" />
</g>
<!-- d50a982d151f490f96ea6fafbe9f757f -->
<g id="node6" class="node">
<title>d50a982d151f490f96ea6fafbe9f757f</title>
<g id="a_node6"><a xlink:href="#beamcenter" xlink:title="BeamCenter">
<path fill="none" stroke="black" d="M260,-1029.5C260,-1029.5 183,-1029.5 183,-1029.5 177,-1029.5 171,-1023.5 171,-1017.5 171,-1017.5 171,-940.5 171,-940.5 171,-934.5 177,-928.5 183,-928.5 183,-928.5 260,-928.5 260,-928.5 266,-928.5 272,-934.5 272,-940.5 272,-940.5 272,-1017.5 272,-1017.5 272,-1023.5 266,-1029.5 260,-1029.5" />
<text text-anchor="middle" x="221.5" y="-932.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">BeamCenter</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;d50a982d151f490f96ea6fafbe9f757f -->
<g id="edge5" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;d50a982d151f490f96ea6fafbe9f757f</title>
<path fill="none" stroke="#7b8894" d="M124.54,-888.68C137.25,-900.64 150.72,-913.33 163.43,-925.29" />
<polygon fill="#7b8894" stroke="#7b8894" points="126.86,-886.06 117.17,-881.75 122.06,-891.16 126.86,-886.06" />
<polygon fill="#7b8894" stroke="#7b8894" points="161.13,-927.93 170.81,-932.24 165.93,-922.83 161.13,-927.93" />
</g>
<!-- 0add483055dc4c139d15d5715f639d7f -->
<g id="node7" class="node">
<title>0add483055dc4c139d15d5715f639d7f</title>
<g id="a_node7"><a xlink:href="#beamspread" xlink:title="BeamSpread">
<path fill="none" stroke="black" d="M260,-1173.5C260,-1173.5 183,-1173.5 183,-1173.5 177,-1173.5 171,-1167.5 171,-1161.5 171,-1161.5 171,-1084.5 171,-1084.5 171,-1078.5 177,-1072.5 183,-1072.5 183,-1072.5 260,-1072.5 260,-1072.5 266,-1072.5 272,-1078.5 272,-1084.5 272,-1084.5 272,-1161.5 272,-1161.5 272,-1167.5 266,-1173.5 260,-1173.5" />
<text text-anchor="middle" x="221.5" y="-1076.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">BeamSpread</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;0add483055dc4c139d15d5715f639d7f -->
<g id="edge6" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;0add483055dc4c139d15d5715f639d7f</title>
<path fill="none" stroke="#7b8894" d="M99.21,-894.69C125.43,-944.05 162.5,-1013.83 188.74,-1063.22" />
<polygon fill="#7b8894" stroke="#7b8894" points="102.28,-893.01 94.5,-885.83 96.1,-896.3 102.28,-893.01" />
<polygon fill="#7b8894" stroke="#7b8894" points="185.73,-1065.01 193.51,-1072.2 191.91,-1061.73 185.73,-1065.01" />
</g>
<!-- ebd778916e8a48a49b2844434c6b3bef -->
<g id="node8" class="node">
<title>ebd778916e8a48a49b2844434c6b3bef</title>
<g id="a_node8"><a xlink:href="#changeaperture" xlink:title="ChangeAperture">
<path fill="none" stroke="black" d="M260,-1317.5C260,-1317.5 183,-1317.5 183,-1317.5 177,-1317.5 171,-1311.5 171,-1305.5 171,-1305.5 171,-1228.5 171,-1228.5 171,-1222.5 177,-1216.5 183,-1216.5 183,-1216.5 260,-1216.5 260,-1216.5 266,-1216.5 272,-1222.5 272,-1228.5 272,-1228.5 272,-1305.5 272,-1305.5 272,-1311.5 266,-1317.5 260,-1317.5" />
<text text-anchor="middle" x="221.5" y="-1220.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">ChangeAperture</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;ebd778916e8a48a49b2844434c6b3bef -->
<g id="edge7" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;ebd778916e8a48a49b2844434c6b3bef</title>
<path fill="none" stroke="#7b8894" d="M88.9,-895.41C118.06,-977.75 169.98,-1124.36 199.13,-1206.66" />
<polygon fill="#7b8894" stroke="#7b8894" points="92.14,-894.08 85.5,-885.83 85.54,-896.42 92.14,-894.08" />
<polygon fill="#7b8894" stroke="#7b8894" points="195.93,-1208.11 202.57,-1216.37 202.53,-1205.77 195.93,-1208.11" />
</g>
<!-- d59e9faba55243fbaf3ee2c039a5b620 -->
<g id="node9" class="node">
<title>d59e9faba55243fbaf3ee2c039a5b620</title>
<g id="a_node9"><a xlink:href="#lenscorrection" xlink:title="LensCorrection">
<path fill="none" stroke="black" d="M260,-1461.5C260,-1461.5 183,-1461.5 183,-1461.5 177,-1461.5 171,-1455.5 171,-1449.5 171,-1449.5 171,-1372.5 171,-1372.5 171,-1366.5 177,-1360.5 183,-1360.5 183,-1360.5 260,-1360.5 260,-1360.5 266,-1360.5 272,-1366.5 272,-1372.5 272,-1372.5 272,-1449.5 272,-1449.5 272,-1455.5 266,-1461.5 260,-1461.5" />
<text text-anchor="middle" x="221.5" y="-1364.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">LensCorrection</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;d59e9faba55243fbaf3ee2c039a5b620 -->
<g id="edge8" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;d59e9faba55243fbaf3ee2c039a5b620</title>
<path fill="none" stroke="#7b8894" d="M83.59,-895.57C113,-1006.29 175.1,-1240.07 204.46,-1350.63" />
<polygon fill="#7b8894" stroke="#7b8894" points="86.89,-894.38 80.94,-885.61 80.13,-896.17 86.89,-894.38" />
<polygon fill="#7b8894" stroke="#7b8894" points="201.08,-1351.53 207.03,-1360.3 207.85,-1349.73 201.08,-1351.53" />
</g>
<!-- d62e9b1dd5c541d49f7aefcab35c13fa -->
<g id="node10" class="node">
<title>d62e9b1dd5c541d49f7aefcab35c13fa</title>
<g id="a_node10"><a xlink:href="#findaperture" xlink:title="FindAperture">
<path fill="none" stroke="black" d="M260,-1605.5C260,-1605.5 183,-1605.5 183,-1605.5 177,-1605.5 171,-1599.5 171,-1593.5 171,-1593.5 171,-1516.5 171,-1516.5 171,-1510.5 177,-1504.5 183,-1504.5 183,-1504.5 260,-1504.5 260,-1504.5 266,-1504.5 272,-1510.5 272,-1516.5 272,-1516.5 272,-1593.5 272,-1593.5 272,-1599.5 266,-1605.5 260,-1605.5" />
<text text-anchor="middle" x="221.5" y="-1508.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">FindAperture</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;d62e9b1dd5c541d49f7aefcab35c13fa -->
<g id="edge9" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;d62e9b1dd5c541d49f7aefcab35c13fa</title>
<path fill="none" stroke="#7b8894" d="M80.4,-895.7C109.28,-1031.6 178.85,-1359.01 207.67,-1494.61" />
<polygon fill="#7b8894" stroke="#7b8894" points="83.76,-894.68 78.26,-885.63 76.91,-896.14 83.76,-894.68" />
<polygon fill="#7b8894" stroke="#7b8894" points="204.25,-1495.37 209.75,-1504.43 211.1,-1493.92 204.25,-1495.37" />
</g>
<!-- 617a3ed87aa5436d9dd5f56149a3182b -->
<g id="node11" class="node">
<title>617a3ed87aa5436d9dd5f56149a3182b</title>
<g id="a_node11"><a xlink:href="#changeaperture" xlink:title="ChangeAperture">
<path fill="none" stroke="black" d="M260,-306.5C260,-306.5 183,-306.5 183,-306.5 177,-306.5 171,-300.5 171,-294.5 171,-294.5 171,-217.5 171,-217.5 171,-211.5 177,-205.5 183,-205.5 183,-205.5 260,-205.5 260,-205.5 266,-205.5 272,-211.5 272,-217.5 272,-217.5 272,-294.5 272,-294.5 272,-300.5 266,-306.5 260,-306.5" />
<text text-anchor="middle" x="221.5" y="-209.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">ChangeAperture</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;617a3ed87aa5436d9dd5f56149a3182b -->
<g id="edge22" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;617a3ed87aa5436d9dd5f56149a3182b</title>
<path fill="none" stroke="#7b8894" d="M80.88,-784.38C109.01,-677.93 174.18,-431.28 204.48,-316.62" />
<polygon fill="#7b8894" stroke="#7b8894" points="207.96,-317.17 207.13,-306.61 201.19,-315.38 207.96,-317.17" />
</g>
<!-- dd9f68d88e11422b922b0b1074aa8de6 -->
<g id="node22" class="node">
<title>dd9f68d88e11422b922b0b1074aa8de6</title>
<g id="a_node22"><a xlink:href="#shutdown" xlink:title="Shutdown">
<path fill="none" stroke="black" d="M1810,-131.5C1810,-131.5 1733,-131.5 1733,-131.5 1727,-131.5 1721,-125.5 1721,-119.5 1721,-119.5 1721,-42.5 1721,-42.5 1721,-36.5 1727,-30.5 1733,-30.5 1733,-30.5 1810,-30.5 1810,-30.5 1816,-30.5 1822,-36.5 1822,-42.5 1822,-42.5 1822,-119.5 1822,-119.5 1822,-125.5 1816,-131.5 1810,-131.5" />
<text text-anchor="middle" x="1771.5" y="-34.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Shutdown</text>
</a>
</g>
</g>
<!-- e09200d504694791a7047d5b4a4da08c&#45;&gt;dd9f68d88e11422b922b0b1074aa8de6 -->
<g id="edge24" class="edge">
<title>e09200d504694791a7047d5b4a4da08c-&gt;dd9f68d88e11422b922b0b1074aa8de6</title>
<path fill="none" stroke="#7b8894" d="M126.6,-808.42C390.68,-691.64 1446.65,-224.66 1711.18,-107.68" />
<polygon fill="#7b8894" stroke="#7b8894" points="124.79,-805.39 117.06,-812.64 127.63,-811.8 124.79,-805.39" />
<polygon fill="#7b8894" stroke="#7b8894" points="1712.89,-110.75 1720.62,-103.5 1710.06,-104.34 1712.89,-110.75" />
</g>
<!-- 4cf035cc53b14b4b9657e5edf68c28ef -->
<g id="node12" class="node">
<title>4cf035cc53b14b4b9657e5edf68c28ef</title>
<g id="a_node12"><a xlink:href="#findaperture" xlink:title="FindAperture">
<path fill="none" stroke="black" d="M415,-261.5C415,-261.5 338,-261.5 338,-261.5 332,-261.5 326,-255.5 326,-249.5 326,-249.5 326,-172.5 326,-172.5 326,-166.5 332,-160.5 338,-160.5 338,-160.5 415,-160.5 415,-160.5 421,-160.5 427,-166.5 427,-172.5 427,-172.5 427,-249.5 427,-249.5 427,-255.5 421,-261.5 415,-261.5" />
<text text-anchor="middle" x="376.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">FindAperture</text>
</a>
</g>
</g>
<!-- 617a3ed87aa5436d9dd5f56149a3182b&#45;&gt;4cf035cc53b14b4b9657e5edf68c28ef -->
<g id="edge10" class="edge">
<title>617a3ed87aa5436d9dd5f56149a3182b-&gt;4cf035cc53b14b4b9657e5edf68c28ef</title>
<path fill="none" stroke="#7b8894" d="M272.17,-241.39C286.14,-237.28 301.47,-232.77 315.95,-228.51" />
<polygon fill="#7b8894" stroke="#7b8894" points="317.21,-231.79 325.81,-225.61 315.23,-225.08 317.21,-231.79" />
</g>
<!-- ece911444adf4560a2d522e8f7beb889 -->
<g id="node13" class="node">
<title>ece911444adf4560a2d522e8f7beb889</title>
<g id="a_node13"><a xlink:href="#autoexposure" xlink:title="AutoExposure">
<path fill="none" stroke="black" d="M570,-261.5C570,-261.5 493,-261.5 493,-261.5 487,-261.5 481,-255.5 481,-249.5 481,-249.5 481,-172.5 481,-172.5 481,-166.5 487,-160.5 493,-160.5 493,-160.5 570,-160.5 570,-160.5 576,-160.5 582,-166.5 582,-172.5 582,-172.5 582,-249.5 582,-249.5 582,-255.5 576,-261.5 570,-261.5" />
<text text-anchor="middle" x="531.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">AutoExposure</text>
</a>
</g>
</g>
<!-- 4cf035cc53b14b4b9657e5edf68c28ef&#45;&gt;ece911444adf4560a2d522e8f7beb889 -->
<g id="edge11" class="edge">
<title>4cf035cc53b14b4b9657e5edf68c28ef-&gt;ece911444adf4560a2d522e8f7beb889</title>
<path fill="none" stroke="#7b8894" d="M427.17,-211C441.01,-211 456.18,-211 470.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="470.81,-214.5 480.81,-211 470.81,-207.5 470.81,-214.5" />
</g>
<!-- 5aafd189f3ea4b47a19799634f048bc3 -->
<g id="node14" class="node">
<title>5aafd189f3ea4b47a19799634f048bc3</title>
<g id="a_node14"><a xlink:href="#beamcenter" xlink:title="BeamCenter">
<path fill="none" stroke="black" d="M725,-261.5C725,-261.5 648,-261.5 648,-261.5 642,-261.5 636,-255.5 636,-249.5 636,-249.5 636,-172.5 636,-172.5 636,-166.5 642,-160.5 648,-160.5 648,-160.5 725,-160.5 725,-160.5 731,-160.5 737,-166.5 737,-172.5 737,-172.5 737,-249.5 737,-249.5 737,-255.5 731,-261.5 725,-261.5" />
<text text-anchor="middle" x="686.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">BeamCenter</text>
</a>
</g>
</g>
<!-- ece911444adf4560a2d522e8f7beb889&#45;&gt;5aafd189f3ea4b47a19799634f048bc3 -->
<g id="edge12" class="edge">
<title>ece911444adf4560a2d522e8f7beb889-&gt;5aafd189f3ea4b47a19799634f048bc3</title>
<path fill="none" stroke="#7b8894" d="M582.17,-211C596.01,-211 611.18,-211 625.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="625.81,-214.5 635.81,-211 625.81,-207.5 625.81,-214.5" />
</g>
<!-- 49585309955d45e88e888ec0ea908cd0 -->
<g id="node15" class="node">
<title>49585309955d45e88e888ec0ea908cd0</title>
<g id="a_node15"><a xlink:href="#beamspread" xlink:title="BeamSpread">
<path fill="none" stroke="black" d="M880,-261.5C880,-261.5 803,-261.5 803,-261.5 797,-261.5 791,-255.5 791,-249.5 791,-249.5 791,-172.5 791,-172.5 791,-166.5 797,-160.5 803,-160.5 803,-160.5 880,-160.5 880,-160.5 886,-160.5 892,-166.5 892,-172.5 892,-172.5 892,-249.5 892,-249.5 892,-255.5 886,-261.5 880,-261.5" />
<text text-anchor="middle" x="841.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">BeamSpread</text>
</a>
</g>
</g>
<!-- 5aafd189f3ea4b47a19799634f048bc3&#45;&gt;49585309955d45e88e888ec0ea908cd0 -->
<g id="edge13" class="edge">
<title>5aafd189f3ea4b47a19799634f048bc3-&gt;49585309955d45e88e888ec0ea908cd0</title>
<path fill="none" stroke="#7b8894" d="M737.17,-211C751.01,-211 766.18,-211 780.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="780.81,-214.5 790.81,-211 780.81,-207.5 780.81,-214.5" />
</g>
<!-- 2c1b1662307644b7a1a4395ef2aae844 -->
<g id="node16" class="node">
<title>2c1b1662307644b7a1a4395ef2aae844</title>
<g id="a_node16"><a xlink:href="#brightfield" xlink:title="Brightfield">
<path fill="none" stroke="black" d="M1035,-261.5C1035,-261.5 958,-261.5 958,-261.5 952,-261.5 946,-255.5 946,-249.5 946,-249.5 946,-172.5 946,-172.5 946,-166.5 952,-160.5 958,-160.5 958,-160.5 1035,-160.5 1035,-160.5 1041,-160.5 1047,-166.5 1047,-172.5 1047,-172.5 1047,-249.5 1047,-249.5 1047,-255.5 1041,-261.5 1035,-261.5" />
<text text-anchor="middle" x="996.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Brightfield</text>
</a>
</g>
</g>
<!-- 49585309955d45e88e888ec0ea908cd0&#45;&gt;2c1b1662307644b7a1a4395ef2aae844 -->
<g id="edge14" class="edge">
<title>49585309955d45e88e888ec0ea908cd0-&gt;2c1b1662307644b7a1a4395ef2aae844</title>
<path fill="none" stroke="#7b8894" d="M892.17,-211C906.01,-211 921.18,-211 935.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="935.81,-214.5 945.81,-211 935.81,-207.5 935.81,-214.5" />
</g>
<!-- aa9b44237f6b44d285184a08f84b31be -->
<g id="node17" class="node">
<title>aa9b44237f6b44d285184a08f84b31be</title>
<g id="a_node17"><a xlink:href="#darkfield" xlink:title="Darkfield">
<path fill="none" stroke="black" d="M1190,-261.5C1190,-261.5 1113,-261.5 1113,-261.5 1107,-261.5 1101,-255.5 1101,-249.5 1101,-249.5 1101,-172.5 1101,-172.5 1101,-166.5 1107,-160.5 1113,-160.5 1113,-160.5 1190,-160.5 1190,-160.5 1196,-160.5 1202,-166.5 1202,-172.5 1202,-172.5 1202,-249.5 1202,-249.5 1202,-255.5 1196,-261.5 1190,-261.5" />
<text text-anchor="middle" x="1151.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Darkfield</text>
</a>
</g>
</g>
<!-- 2c1b1662307644b7a1a4395ef2aae844&#45;&gt;aa9b44237f6b44d285184a08f84b31be -->
<g id="edge15" class="edge">
<title>2c1b1662307644b7a1a4395ef2aae844-&gt;aa9b44237f6b44d285184a08f84b31be</title>
<path fill="none" stroke="#7b8894" d="M1047.17,-211C1061.01,-211 1076.18,-211 1090.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="1090.81,-214.5 1100.81,-211 1090.81,-207.5 1090.81,-214.5" />
</g>
<!-- 5634b595629548ab9d7d34b2be2453be -->
<g id="node18" class="node">
<title>5634b595629548ab9d7d34b2be2453be</title>
<g id="a_node18"><a xlink:href="#autofocus" xlink:title="AutoFocus">
<path fill="none" stroke="black" d="M1345,-261.5C1345,-261.5 1268,-261.5 1268,-261.5 1262,-261.5 1256,-255.5 1256,-249.5 1256,-249.5 1256,-172.5 1256,-172.5 1256,-166.5 1262,-160.5 1268,-160.5 1268,-160.5 1345,-160.5 1345,-160.5 1351,-160.5 1357,-166.5 1357,-172.5 1357,-172.5 1357,-249.5 1357,-249.5 1357,-255.5 1351,-261.5 1345,-261.5" />
<text text-anchor="middle" x="1306.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">AutoFocus</text>
</a>
</g>
</g>
<!-- aa9b44237f6b44d285184a08f84b31be&#45;&gt;5634b595629548ab9d7d34b2be2453be -->
<g id="edge16" class="edge">
<title>aa9b44237f6b44d285184a08f84b31be-&gt;5634b595629548ab9d7d34b2be2453be</title>
<path fill="none" stroke="#7b8894" d="M1202.17,-211C1216.01,-211 1231.18,-211 1245.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="1245.81,-214.5 1255.81,-211 1245.81,-207.5 1245.81,-214.5" />
</g>
<!-- ddec5d2eb0f74cda89ed50560cfdb0d0 -->
<g id="node19" class="node">
<title>ddec5d2eb0f74cda89ed50560cfdb0d0</title>
<g id="a_node19"><a xlink:href="#lenscorrection" xlink:title="LensCorrection">
<path fill="none" stroke="black" d="M1500,-117.5C1500,-117.5 1423,-117.5 1423,-117.5 1417,-117.5 1411,-111.5 1411,-105.5 1411,-105.5 1411,-28.5 1411,-28.5 1411,-22.5 1417,-16.5 1423,-16.5 1423,-16.5 1500,-16.5 1500,-16.5 1506,-16.5 1512,-22.5 1512,-28.5 1512,-28.5 1512,-105.5 1512,-105.5 1512,-111.5 1506,-117.5 1500,-117.5" />
<text text-anchor="middle" x="1461.5" y="-20.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">LensCorrection</text>
</a>
</g>
</g>
<!-- 5634b595629548ab9d7d34b2be2453be&#45;&gt;ddec5d2eb0f74cda89ed50560cfdb0d0 -->
<g id="edge17" class="edge">
<title>5634b595629548ab9d7d34b2be2453be-&gt;ddec5d2eb0f74cda89ed50560cfdb0d0</title>
<path fill="none" stroke="#7b8894" d="M1357.17,-164.25C1371.95,-150.34 1388.25,-135 1403.45,-120.69" />
<polygon fill="#7b8894" stroke="#7b8894" points="1405.93,-123.17 1410.81,-113.76 1401.13,-118.07 1405.93,-123.17" />
</g>
<!-- 793af28c621b49eabd678da52045f8d0 -->
<g id="node20" class="node">
<title>793af28c621b49eabd678da52045f8d0</title>
<g id="a_node20"><a xlink:href="#movestage" xlink:title="MoveStage">
<path fill="none" stroke="black" d="M1500,-261.5C1500,-261.5 1423,-261.5 1423,-261.5 1417,-261.5 1411,-255.5 1411,-249.5 1411,-249.5 1411,-172.5 1411,-172.5 1411,-166.5 1417,-160.5 1423,-160.5 1423,-160.5 1500,-160.5 1500,-160.5 1506,-160.5 1512,-166.5 1512,-172.5 1512,-172.5 1512,-249.5 1512,-249.5 1512,-255.5 1506,-261.5 1500,-261.5" />
<text text-anchor="middle" x="1461.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">MoveStage</text>
</a>
</g>
</g>
<!-- 5634b595629548ab9d7d34b2be2453be&#45;&gt;793af28c621b49eabd678da52045f8d0 -->
<g id="edge19" class="edge">
<title>5634b595629548ab9d7d34b2be2453be-&gt;793af28c621b49eabd678da52045f8d0</title>
<path fill="none" stroke="#7b8894" d="M1357.17,-211C1371.01,-211 1386.18,-211 1400.53,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="1400.81,-214.5 1410.81,-211 1400.81,-207.5 1400.81,-214.5" />
</g>
<!-- ddec5d2eb0f74cda89ed50560cfdb0d0&#45;&gt;793af28c621b49eabd678da52045f8d0 -->
<g id="edge18" class="edge">
<title>ddec5d2eb0f74cda89ed50560cfdb0d0-&gt;793af28c621b49eabd678da52045f8d0</title>
<path fill="none" stroke="#7b8894" d="M1461.5,-117.62C1461.5,-128.52 1461.5,-139.41 1461.5,-150.3" />
<polygon fill="#7b8894" stroke="#7b8894" points="1458,-150.3 1461.5,-160.3 1465,-150.3 1458,-150.3" />
</g>
<!-- 29244471f78f43c6b97b1133dece63c2 -->
<g id="node21" class="node">
<title>29244471f78f43c6b97b1133dece63c2</title>
<g id="a_node21"><a xlink:href="#capturetile" xlink:title="CaptureTile">
<path fill="none" stroke="black" d="M1655,-261.5C1655,-261.5 1578,-261.5 1578,-261.5 1572,-261.5 1566,-255.5 1566,-249.5 1566,-249.5 1566,-172.5 1566,-172.5 1566,-166.5 1572,-160.5 1578,-160.5 1578,-160.5 1655,-160.5 1655,-160.5 1661,-160.5 1667,-166.5 1667,-172.5 1667,-172.5 1667,-249.5 1667,-249.5 1667,-255.5 1661,-261.5 1655,-261.5" />
<text text-anchor="middle" x="1616.5" y="-164.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">CaptureTile</text>
</a>
</g>
</g>
<!-- 793af28c621b49eabd678da52045f8d0&#45;&gt;29244471f78f43c6b97b1133dece63c2 -->
<g id="edge20" class="edge">
<title>793af28c621b49eabd678da52045f8d0-&gt;29244471f78f43c6b97b1133dece63c2</title>
<path fill="none" stroke="#7b8894" d="M1522.45,-211C1533.33,-211 1544.68,-211 1555.56,-211" />
<polygon fill="#7b8894" stroke="#7b8894" points="1522.17,-207.5 1512.17,-211 1522.17,-214.5 1522.17,-207.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1555.81,-214.5 1565.81,-211 1555.81,-207.5 1555.81,-214.5" />
</g>
<!-- 29244471f78f43c6b97b1133dece63c2&#45;&gt;617a3ed87aa5436d9dd5f56149a3182b -->
<g id="edge21" class="edge">
<title>29244471f78f43c6b97b1133dece63c2-&gt;617a3ed87aa5436d9dd5f56149a3182b</title>
<path fill="none" stroke="#7b8894" d="M1565.78,-212.64C1350.88,-219.57 515.78,-246.51 282.39,-254.04" />
<polygon fill="#7b8894" stroke="#7b8894" points="282.27,-250.54 272.39,-254.36 282.49,-257.53 282.27,-250.54" />
</g>
<!-- 29244471f78f43c6b97b1133dece63c2&#45;&gt;dd9f68d88e11422b922b0b1074aa8de6 -->
<g id="edge23" class="edge">
<title>29244471f78f43c6b97b1133dece63c2-&gt;dd9f68d88e11422b922b0b1074aa8de6</title>
<path fill="none" stroke="#7b8894" d="M1667.17,-168.79C1681.81,-156.36 1697.95,-142.64 1713.03,-129.83" />
<polygon fill="#7b8894" stroke="#7b8894" points="1715.46,-132.36 1720.81,-123.22 1710.93,-127.03 1715.46,-132.36" />
</g>
</g>
</svg></div>

<p>Below, the functionality of each of “states” shown above is detailed.
In reality, each of these “states” is a state machine in and of itself.</p>

<h4 id="preview">Preview</h4>

<p>The <code class="language-plaintext highlighter-rouge">Preview</code> machine is used for previewing the image data, and checking that the microscope functions as expected.</p>

<h4 id="acquisition">Acquisition</h4>

<p>The <code class="language-plaintext highlighter-rouge">Acquisition</code> machine is used to set up and capture a montage.</p>

<h4 id="montage">Montage</h4>

<p>The <code class="language-plaintext highlighter-rouge">Montage</code> machine collects the required tiles.</p>

<h4 id="updateimage">UpdateImage</h4>

<p>The <code class="language-plaintext highlighter-rouge">UpdateImage</code> machine requests an image from the <a href="/TEM_architecture/camera.html">camera</a>, and sends it to the <a href="/TEM_architecture/pipeline.html">image processing pipeline</a>.
Ultimately, this image will then be shown on the <a href="/TEM_architecture/ui.html">UI</a>.</p>

<h4 id="darkfield">Darkfield</h4>

<p>The <code class="language-plaintext highlighter-rouge">Darkfield</code> machine collects a darkfield image by lowering the screen on the <a href="/TEM_architecture/scope.html">microcope</a>, collecting a series of images, averaging them, then raising the screen again.</p>

<h4 id="brightfield">Brightfield</h4>

<p>The <code class="language-plaintext highlighter-rouge">Brightfield</code> machine collects a brightfield image by moving the <a href="/TEM_architecture/stage.html">stage</a> while collecting a series of images, then averaging them.</p>

<h4 id="autofocus">AutoFocus</h4>

<p>The <code class="language-plaintext highlighter-rouge">AutoFocus</code> machine optimizes the focus by maximizing the focus score produced by the <a href="/TEM_architecture/pipeline.html">image processing pipeline</a>.</p>

<h4 id="autoexposure">AutoExposure</h4>

<p>The <code class="language-plaintext highlighter-rouge">AutoExposure</code> machine optimizes the exposure by finding the <a href="/TEM_architecture/camera.html">camera</a> exposure which produces a mean value within the correct range as calculated by the <a href="/TEM_architecture/pipeline.html">image processing pipeline</a>.</p>

<h4 id="beamcenter">BeamCenter</h4>

<p>The <code class="language-plaintext highlighter-rouge">BeamCenter</code> machine centers the electron beam in the <a href="/TEM_architecture/scope.html">microscope’s</a> field of view.</p>

<h4 id="beamspread">BeamSpread</h4>

<p>The <code class="language-plaintext highlighter-rouge">BeamSpread</code> machine spreads the beam to get an even density of electrons over the field of view.</p>

<h4 id="changeaperture">ChangeAperture</h4>

<p>The <code class="language-plaintext highlighter-rouge">ChangeAperture</code> machine changes the current aperture of the tape or stick that is being imaged.</p>

<h4 id="lenscorrection">LensCorrection</h4>

<p>The <code class="language-plaintext highlighter-rouge">LensCorrection</code> machine collects a lens correction montage.</p>

<h4 id="findaperture">FindAperture</h4>

<p>The <code class="language-plaintext highlighter-rouge">FindAperture</code> machine finds the bounds of the current aperture by moving the <a href="/TEM_architecture/stage.html">stage</a> and processing images.</p>

<h4 id="movestage">MoveStage</h4>

<p>The <code class="language-plaintext highlighter-rouge">MoveStage</code> machine moves the <a href="/TEM_architecture/stage.html">stage</a> to the location of the next tile.</p>

<h4 id="capturetile">CaptureTile</h4>

<p>The <code class="language-plaintext highlighter-rouge">CaptureTile</code> machine captures a single tile using the <a href="/TEM_architecture/camera.html">camera</a>.</p>

<h4 id="shutdown">Shutdown</h4>

<p>In the <code class="language-plaintext highlighter-rouge">Shutdown</code> machine, the microscope is placed into a safe state.
Ideally, the beam is turned off, and the screen is lowered.</p>

<blockquote>
  <h5 id="note">Note:</h5>
  <p>Historically, orchestration of all components was accomplished using <a href="https://github.com/AllenInstitute/pytemca">pytemca</a> documented <a href="/TEM_architecture/pytemca.html">here</a>.</p>
</blockquote>

</div>
    </div>
</div>
        <footer class="mdl-mega-footer">
  <div class="mdl-mega-footer__middle-section">
    
  </div>
  <div class="mdl-mega-footer__bottom-section">
    <ul class="mdl-mega-footer__link-list">
      
    </ul>
  </div>
</footer>

      </main>
    </div>
  </body>
</html>
