<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Image Processing Pipeline - TEM Architecture</title>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
<!-- <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.-.min.css"/> -->
<link rel="stylesheet" href="/assets/css/style.css"/>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/font-awesome.min.css"> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>

  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <!-- <div class="mdl-layout--fixed-header mdl-layout__header--scroll"> -->
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">
        <a href="/">TEM Architecture</a>
      </span>
      <div class="mdl-layout-spacer mdl-layout--large-screen-only"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">TEM Architecture</span>
    <nav class="mdl-navigation">
      
    </nav>
  </div>
<!-- </div> -->

      <main class="mdl-layout__content">
        <div class="mdl-grid page-container">
  <div class="mdl-card mdl-cell--12-col mdl-shadow--4dp">
    <div class="mdl-card__title">
      <h2 class="mdl-card__title--text">
        Image Processing Pipeline
      </h2>
    </div>
    <div class="mdl-card__supporting-text">
      <p>The image processing pipeline is primarily written in C++ with some Python bindings.
It utilizes the <a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/onetbb.html">Intel Thread Building Blocks</a> library for parallelism, and <a href="https://opencv.org/">OpenCV</a> for image processing.</p>

<div class="diagram"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0.00 0.00 1694.00 860.00">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(144 716)">
<title>%3</title>
<g id="clust1" class="cluster">
<title>cluster_Intel TBB</title>
<path fill="#ffe0b2" stroke="#aeb6be" d="M12,0C12,0 1394,0 1394,0 1400,0 1406,-6 1406,-12 1406,-12 1406,-560 1406,-560 1406,-566 1400,-572 1394,-572 1394,-572 12,-572 12,-572 6,-572 0,-566 0,-560 0,-560 0,-12 0,-12 0,-6 6,0 12,0" />
<text text-anchor="middle" x="35.5" y="-558.4" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">Intel TBB</text>
</g>
<!-- 8972f76712bb49f2ae88f302b9fc8afe -->
<g id="node1" class="node">
<title>8972f76712bb49f2ae88f302b9fc8afe</title>
<g id="a_node1"><a xlink:href="#recieve-tile-filepath" xlink:title="Recieve Tile Filepath">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="0" y="-336.5" />
<text text-anchor="middle" x="50.5" y="-221.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Recieve Tile Filepath</text>
</a>
</g>
</g>
<!-- 3c700da7da924edeb4ed0b4992c791e5 -->
<g id="node2" class="node">
<title>3c700da7da924edeb4ed0b4992c791e5</title>
<g id="a_node2"><a xlink:href="#load-tile" xlink:title="Load Tile">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="145" y="-342.812" />
<text text-anchor="middle" x="195.5" y="-221.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Load Tile</text>
</a>
</g>
</g>
<!-- 8972f76712bb49f2ae88f302b9fc8afe&#45;&gt;3c700da7da924edeb4ed0b4992c791e5 -->
<g id="edge1" class="edge">
<title>8972f76712bb49f2ae88f302b9fc8afe-&gt;3c700da7da924edeb4ed0b4992c791e5</title>
<path fill="none" stroke="#7b8894" d="M101.21,-286C111.97,-286 123.43,-286 134.52,-286" />
<polygon fill="#7b8894" stroke="#7b8894" points="134.57,-289.5 144.57,-286 134.57,-282.5 134.57,-289.5" />
</g>
<!-- 13acd8e13cf04f9992a1ae0c36ccb07c -->
<g id="node3" class="node">
<title>13acd8e13cf04f9992a1ae0c36ccb07c</title>
<g id="a_node3"><a xlink:href="#transfer-to-gpu" xlink:title="Transfer to GPU">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="290" y="-342.812" />
<text text-anchor="middle" x="340.5" y="-221.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Transfer to GPU</text>
</a>
</g>
</g>
<!-- 3c700da7da924edeb4ed0b4992c791e5&#45;&gt;13acd8e13cf04f9992a1ae0c36ccb07c -->
<g id="edge2" class="edge">
<title>3c700da7da924edeb4ed0b4992c791e5-&gt;13acd8e13cf04f9992a1ae0c36ccb07c</title>
<path fill="none" stroke="#7b8894" d="M246.21,-286C256.97,-286 268.43,-286 279.52,-286" />
<polygon fill="#7b8894" stroke="#7b8894" points="279.57,-289.5 289.57,-286 279.57,-282.5 279.57,-289.5" />
</g>
<!-- 42fe6665e68a4761993754b5908be0da -->
<g id="node4" class="node">
<title>42fe6665e68a4761993754b5908be0da</title>
<g id="a_node4"><a xlink:href="#flip" xlink:title="Horizontal Flip">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="435" y="-342.812" />
<text text-anchor="middle" x="485.5" y="-221.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Horizontal Flip</text>
</a>
</g>
</g>
<!-- 13acd8e13cf04f9992a1ae0c36ccb07c&#45;&gt;42fe6665e68a4761993754b5908be0da -->
<g id="edge3" class="edge">
<title>13acd8e13cf04f9992a1ae0c36ccb07c-&gt;42fe6665e68a4761993754b5908be0da</title>
<path fill="none" stroke="#7b8894" d="M391.21,-286C401.97,-286 413.43,-286 424.52,-286" />
<polygon fill="#7b8894" stroke="#7b8894" points="424.57,-289.5 434.57,-286 424.57,-282.5 424.57,-289.5" />
</g>
<!-- ae84ac149ccc443f856817e938ab5814 -->
<g id="node5" class="node">
<title>ae84ac149ccc443f856817e938ab5814</title>
<g id="a_node5"><a xlink:href="#flat-field-correction" xlink:title="Flat-Field Correction">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="580" y="-342.812" />
<text text-anchor="middle" x="630.5" y="-221.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Flat-Field Correction</text>
</a>
</g>
</g>
<!-- 42fe6665e68a4761993754b5908be0da&#45;&gt;ae84ac149ccc443f856817e938ab5814 -->
<g id="edge4" class="edge">
<title>42fe6665e68a4761993754b5908be0da-&gt;ae84ac149ccc443f856817e938ab5814</title>
<path fill="none" stroke="#7b8894" d="M536.21,-286C546.97,-286 558.43,-286 569.52,-286" />
<polygon fill="#7b8894" stroke="#7b8894" points="569.57,-289.5 579.57,-286 569.57,-282.5 569.57,-289.5" />
</g>
<!-- 7d39a73bec7345fd8524e2f16339afae -->
<g id="node6" class="node">
<title>7d39a73bec7345fd8524e2f16339afae</title>
<g id="a_node6"><a xlink:href="#clahe" xlink:title="CLAHE">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="725" y="-342.812" />
<text text-anchor="middle" x="775.5" y="-221.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">CLAHE</text>
</a>
</g>
</g>
<!-- ae84ac149ccc443f856817e938ab5814&#45;&gt;7d39a73bec7345fd8524e2f16339afae -->
<g id="edge5" class="edge">
<title>ae84ac149ccc443f856817e938ab5814-&gt;7d39a73bec7345fd8524e2f16339afae</title>
<path fill="none" stroke="#7b8894" d="M681.21,-286C691.97,-286 703.43,-286 714.52,-286" />
<polygon fill="#7b8894" stroke="#7b8894" points="714.57,-289.5 724.57,-286 714.57,-282.5 714.57,-289.5" />
</g>
<!-- fd4593b49ad14d5fa21af02c334aa121 -->
<g id="node7" class="node">
<title>fd4593b49ad14d5fa21af02c334aa121</title>
<g id="a_node7"><a xlink:href="#min-max-mean" xlink:title="Min, Max, Mean">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="870" y="-560.313" />
<text text-anchor="middle" x="920.5" y="-438.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Min, Max, Mean</text>
</a>
</g>
</g>
<!-- 7d39a73bec7345fd8524e2f16339afae&#45;&gt;fd4593b49ad14d5fa21af02c334aa121 -->
<g id="edge10" class="edge">
<title>7d39a73bec7345fd8524e2f16339afae-&gt;fd4593b49ad14d5fa21af02c334aa121</title>
<path fill="none" stroke="#7b8894" d="M821.18,-354.52C836.41,-377.37 853.48,-402.97 869.11,-426.42" />
<polygon fill="#7b8894" stroke="#7b8894" points="866.34,-428.57 874.8,-434.95 872.17,-424.69 866.34,-428.57" />
</g>
<!-- 09a907e0b7db4aac87d20fb1cabede17 -->
<g id="node9" class="node">
<title>09a907e0b7db4aac87d20fb1cabede17</title>
<g id="a_node9"><a xlink:href="#fft" xlink:title="FFT">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="870" y="-415.313" />
<text text-anchor="middle" x="920.5" y="-293.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">FFT</text>
</a>
</g>
</g>
<!-- 7d39a73bec7345fd8524e2f16339afae&#45;&gt;09a907e0b7db4aac87d20fb1cabede17 -->
<g id="edge12" class="edge">
<title>7d39a73bec7345fd8524e2f16339afae-&gt;09a907e0b7db4aac87d20fb1cabede17</title>
<path fill="none" stroke="#7b8894" d="M826.21,-311.36C837.3,-316.9 849.13,-322.82 860.54,-328.52" />
<polygon fill="#7b8894" stroke="#7b8894" points="859.06,-331.69 869.57,-333.03 862.19,-325.43 859.06,-331.69" />
</g>
<!-- 6cb258bf07e849ae91c69d436339dd85 -->
<g id="node12" class="node">
<title>6cb258bf07e849ae91c69d436339dd85</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="870" y="-270.313" />
<text text-anchor="middle" x="920.5" y="-148.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Transfer to CPU Memory</text>
</g>
<!-- 7d39a73bec7345fd8524e2f16339afae&#45;&gt;6cb258bf07e849ae91c69d436339dd85 -->
<g id="edge15" class="edge">
<title>7d39a73bec7345fd8524e2f16339afae-&gt;6cb258bf07e849ae91c69d436339dd85</title>
<path fill="none" stroke="#7b8894" d="M826.21,-260.64C837.3,-255.1 849.13,-249.18 860.54,-243.48" />
<polygon fill="#7b8894" stroke="#7b8894" points="862.19,-246.57 869.57,-238.97 859.06,-240.31 862.19,-246.57" />
</g>
<!-- aedd1648db884cce837827bdc6fc1a20 -->
<g id="node16" class="node">
<title>aedd1648db884cce837827bdc6fc1a20</title>
<g id="a_node16"><a xlink:href="#lens-correction" xlink:title="Lens Correction">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="870" y="-125.312" />
<text text-anchor="middle" x="920.5" y="-3.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Lens Correction</text>
</a>
</g>
</g>
<!-- 7d39a73bec7345fd8524e2f16339afae&#45;&gt;aedd1648db884cce837827bdc6fc1a20 -->
<g id="edge6" class="edge">
<title>7d39a73bec7345fd8524e2f16339afae-&gt;aedd1648db884cce837827bdc6fc1a20</title>
<path fill="none" stroke="#7b8894" d="M821.18,-217.48C836.41,-194.63 853.48,-169.03 869.11,-145.58" />
<polygon fill="#7b8894" stroke="#7b8894" points="872.17,-147.31 874.8,-137.05 866.34,-143.43 872.17,-147.31" />
</g>
<!-- bfe8ade9d3664a58996772d8df789833 -->
<g id="node8" class="node">
<title>bfe8ade9d3664a58996772d8df789833</title>
<g id="a_node8"><a xlink:href="#send-min-max-mean" xlink:title="Send Min, Max, Mean">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="1015" y="-554" />
<text text-anchor="middle" x="1065.5" y="-438.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Send Min, Max, Mean</text>
</a>
</g>
</g>
<!-- fd4593b49ad14d5fa21af02c334aa121&#45;&gt;bfe8ade9d3664a58996772d8df789833 -->
<g id="edge11" class="edge">
<title>fd4593b49ad14d5fa21af02c334aa121-&gt;bfe8ade9d3664a58996772d8df789833</title>
<path fill="none" stroke="#7b8894" d="M971.21,-503.5C981.97,-503.5 993.43,-503.5 1004.52,-503.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1004.57,-507 1014.57,-503.5 1004.57,-500 1004.57,-507" />
</g>
<!-- f195bb1d710444098bc4deb8857b8e75 -->
<g id="node10" class="node">
<title>f195bb1d710444098bc4deb8857b8e75</title>
<g id="a_node10"><a xlink:href="#focus-score" xlink:title="Compute Focus Score">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="1015" y="-415.313" />
<text text-anchor="middle" x="1065.5" y="-293.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Compute Focus Score</text>
</a>
</g>
</g>
<!-- 09a907e0b7db4aac87d20fb1cabede17&#45;&gt;f195bb1d710444098bc4deb8857b8e75 -->
<g id="edge13" class="edge">
<title>09a907e0b7db4aac87d20fb1cabede17-&gt;f195bb1d710444098bc4deb8857b8e75</title>
<path fill="none" stroke="#7b8894" d="M971.21,-358.5C981.97,-358.5 993.43,-358.5 1004.52,-358.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1004.57,-362 1014.57,-358.5 1004.57,-355 1004.57,-362" />
</g>
<!-- 52be2df76d51464894c3af182ce3ce7d -->
<g id="node11" class="node">
<title>52be2df76d51464894c3af182ce3ce7d</title>
<g id="a_node11"><a xlink:href="#send-focus-score" xlink:title="Send Focus Score">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="1160" y="-409" />
<text text-anchor="middle" x="1210.5" y="-293.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Send Focus Score</text>
</a>
</g>
</g>
<!-- f195bb1d710444098bc4deb8857b8e75&#45;&gt;52be2df76d51464894c3af182ce3ce7d -->
<g id="edge14" class="edge">
<title>f195bb1d710444098bc4deb8857b8e75-&gt;52be2df76d51464894c3af182ce3ce7d</title>
<path fill="none" stroke="#7b8894" d="M1116.21,-358.5C1126.97,-358.5 1138.43,-358.5 1149.52,-358.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1149.57,-362 1159.57,-358.5 1149.57,-355 1149.57,-362" />
</g>
<!-- 944ee6980bf947d4a2c1886b86d1e6cc -->
<g id="node13" class="node">
<title>944ee6980bf947d4a2c1886b86d1e6cc</title>
<g id="a_node13"><a xlink:href="#calculate-histogram" xlink:title="Calculate Histogram">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="1015" y="-270.313" />
<text text-anchor="middle" x="1065.5" y="-148.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Calculate Histogram</text>
</a>
</g>
</g>
<!-- 6cb258bf07e849ae91c69d436339dd85&#45;&gt;944ee6980bf947d4a2c1886b86d1e6cc -->
<g id="edge16" class="edge">
<title>6cb258bf07e849ae91c69d436339dd85-&gt;944ee6980bf947d4a2c1886b86d1e6cc</title>
<path fill="none" stroke="#7b8894" d="M971.21,-213.5C981.97,-213.5 993.43,-213.5 1004.52,-213.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1004.57,-217 1014.57,-213.5 1004.57,-210 1004.57,-217" />
</g>
<!-- 537cfd82472b417581de042709c0f003 -->
<g id="node14" class="node">
<title>537cfd82472b417581de042709c0f003</title>
<g id="a_node14"><a xlink:href="#save-histogram" xlink:title="Save Histogram">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="1160" y="-270.313" />
<text text-anchor="middle" x="1210.5" y="-148.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Save Histogram</text>
</a>
</g>
</g>
<!-- 944ee6980bf947d4a2c1886b86d1e6cc&#45;&gt;537cfd82472b417581de042709c0f003 -->
<g id="edge17" class="edge">
<title>944ee6980bf947d4a2c1886b86d1e6cc-&gt;537cfd82472b417581de042709c0f003</title>
<path fill="none" stroke="#7b8894" d="M1116.21,-213.5C1126.97,-213.5 1138.43,-213.5 1149.52,-213.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1149.57,-217 1159.57,-213.5 1149.57,-210 1149.57,-217" />
</g>
<!-- 3b802c53c9a74cba832deceb9df14bcb -->
<g id="node15" class="node">
<title>3b802c53c9a74cba832deceb9df14bcb</title>
<g id="a_node15"><a xlink:href="#send-histogram-filepath" xlink:title="Send Histogram Filepath">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="1305" y="-264" />
<text text-anchor="middle" x="1355.5" y="-148.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Send Histogram Filepath</text>
</a>
</g>
</g>
<!-- 537cfd82472b417581de042709c0f003&#45;&gt;3b802c53c9a74cba832deceb9df14bcb -->
<g id="edge18" class="edge">
<title>537cfd82472b417581de042709c0f003-&gt;3b802c53c9a74cba832deceb9df14bcb</title>
<path fill="none" stroke="#7b8894" d="M1261.21,-213.5C1271.97,-213.5 1283.43,-213.5 1294.52,-213.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1294.57,-217 1304.57,-213.5 1294.57,-210 1294.57,-217" />
</g>
<!-- 2e58b0a1658b4c81a61120938dee59db -->
<g id="node17" class="node">
<title>2e58b0a1658b4c81a61120938dee59db</title>
<g id="a_node17"><a xlink:href="#transfer-to-cpu-memory" xlink:title="Transfer to CPU Memory">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="1015" y="-125.312" />
<text text-anchor="middle" x="1065.5" y="-3.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Transfer to CPU Memory</text>
</a>
</g>
</g>
<!-- aedd1648db884cce837827bdc6fc1a20&#45;&gt;2e58b0a1658b4c81a61120938dee59db -->
<g id="edge7" class="edge">
<title>aedd1648db884cce837827bdc6fc1a20-&gt;2e58b0a1658b4c81a61120938dee59db</title>
<path fill="none" stroke="#7b8894" d="M971.21,-68.5C981.97,-68.5 993.43,-68.5 1004.52,-68.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1004.57,-72 1014.57,-68.5 1004.57,-65 1004.57,-72" />
</g>
<!-- ca9470b0a2ae40b08ad8e7154e32e454 -->
<g id="node18" class="node">
<title>ca9470b0a2ae40b08ad8e7154e32e454</title>
<g id="a_node18"><a xlink:href="#save-tile" xlink:title="Save Tile">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="1160" y="-125.312" />
<text text-anchor="middle" x="1210.5" y="-3.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Save Tile</text>
</a>
</g>
</g>
<!-- 2e58b0a1658b4c81a61120938dee59db&#45;&gt;ca9470b0a2ae40b08ad8e7154e32e454 -->
<g id="edge8" class="edge">
<title>2e58b0a1658b4c81a61120938dee59db-&gt;ca9470b0a2ae40b08ad8e7154e32e454</title>
<path fill="none" stroke="#7b8894" d="M1116.21,-68.5C1126.97,-68.5 1138.43,-68.5 1149.52,-68.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1149.57,-72 1159.57,-68.5 1149.57,-65 1149.57,-72" />
</g>
<!-- 2d30a8748a904e41b4e0d0a91a3b6588 -->
<g id="node19" class="node">
<title>2d30a8748a904e41b4e0d0a91a3b6588</title>
<g id="a_node19"><a xlink:href="#send-tile-filepath" xlink:title="Send Processed Tile Filepath">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="1305" y="-119" />
<text text-anchor="middle" x="1355.5" y="-3.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Send Processed Tile Filepath</text>
</a>
</g>
</g>
<!-- ca9470b0a2ae40b08ad8e7154e32e454&#45;&gt;2d30a8748a904e41b4e0d0a91a3b6588 -->
<g id="edge9" class="edge">
<title>ca9470b0a2ae40b08ad8e7154e32e454-&gt;2d30a8748a904e41b4e0d0a91a3b6588</title>
<path fill="none" stroke="#7b8894" d="M1261.21,-68.5C1271.97,-68.5 1283.43,-68.5 1294.52,-68.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="1294.57,-72 1304.57,-68.5 1294.57,-65 1294.57,-72" />
</g>
</g>
</svg></div>

<h3 id="recieve-tile-filepath">Recieve Tile Filepath</h3>

<p>This node recieves the metadata for a tile to process from the <a href="/broker.html">message broker</a>, and passes the filename to the load image node.</p>

<h3 id="load-tile">Load Tile</h3>

<p>This node recieves the metadata and filename, and uses openCV to load a tile into CPU memory from SSD based storage.</p>

<h3 id="transfer-to-gpu">Transfer to GPU</h3>

<p>After the tile is loaded into CPU memory, it is transfered into GPU memory for more efficient processing.</p>

<h3 id="flip">Flip</h3>

<p>On the GPU, the tile is horizontally flipped.</p>

<h3 id="flat-field-correction">Flat-Field Correction</h3>

<p>The flat-field correction is applied to the tile using brightfield and darkfield images stored on the SSD.
The brightfield and darkfield file modification times are checked during each execution to check if they need to be reloaded.</p>

<h3 id="clahe">CLAHE</h3>

<p>The Contrast Limited Adaptive Histogram Equilization algorithm is applied to the tile.
The resulting image is sent to multiple functions for further analysis, including an <a href="#fft">FFT</a> for calculating the <a href="#focus-score">focus score</a>, calculating the <a href="#min-max-mean">minimum, maximum, and mean</a> pixel values, and <a href="#calculate-histogram">histogram</a>.</p>

<h3 id="lens-correction">Lens Correction</h3>

<p>To remove distortion, a lens correction is applied.
This is performed using two images stored on the SSD and reloaded whenever the file modification times are newer than the images stored in memory.</p>

<h3 id="transfer-to-cpu-memory">Transfer to CPU Memory</h3>

<p>In order to save the tile, it must first be transferred to CPU memory.</p>

<h3 id="save-tile">Save Tile</h3>

<p>The processed tile can now be saved to disk.</p>

<h3 id="send-tile-filepath">Send Tile Filepath</h3>

<p>The filepath of the processed tile can now be sent via the <a href="/broker.html">broker</a> to other services.</p>

<h3 id="min-max-mean">Min, Max, Mean</h3>

<p>This node calculates the minimum, maximum, and mean pixel values.</p>

<h3 id="send-min-max-mean">Send Min, Max, Mean</h3>

<p>This node sends the minimum, maximum, and mean pixel values to other services via the <a href="/broker.html">broker</a>.</p>

<h3 id="fft">FFT</h3>

<p>This node crops out the center of the tile and computes the Fast Fourier Transform.</p>

<h3 id="focus-score">Focus Score</h3>

<p>This ndoe uses the FFT data to create a metric for the quality of the focus.</p>

<h3 id="send-focus-score">Send Focus Score</h3>

<p>This node sends the focus score to other services via the <a href="/broker.html">broker</a></p>

<h3 id="calculate-histogram">Calculate Histogram</h3>

<p>A small histogram image is created using this node.</p>

<h3 id="save-histogram">Save Histogram</h3>

<p>This node saves the histogram to SSD storage.</p>

<h3 id="send-histogram">Send Histogram</h3>

<p>This node sends the filepath to the histogram to other services using the <a href="/broker.html">broker</a>.</p>

    </div>
  </div>
</div>
        <footer class="mdl-mega-footer">
  <div class="mdl-mega-footer__middle-section">
    
  </div>
  <div class="mdl-mega-footer__bottom-section">
    <ul class="mdl-mega-footer__link-list">
      
    </ul>
  </div>
</footer>

      </main>
    </div>
  </body>
</html>
