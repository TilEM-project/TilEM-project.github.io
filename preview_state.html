<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Preview State - TEM Architecture</title>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
<!-- <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.-.min.css"/> -->
<link rel="stylesheet" href="/assets/css/style.css"/>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/font-awesome.min.css"> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>

  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <!-- <div class="mdl-layout--fixed-header mdl-layout__header--scroll"> -->
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">
        <a href="/">TEM Architecture</a>
      </span>
      <div class="mdl-layout-spacer mdl-layout--large-screen-only"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        
          <a class="mdl-navigation__link" href="/topics.html">Topics</a>
        
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">TEM Architecture</span>
    <nav class="mdl-navigation">
      
        <a class="mdl-navigation__link" href="/topics.html">Topics</a>
        
      
    </nav>
  </div>
<!-- </div> -->

      <main class="mdl-layout__content">
        <div class="mdl-grid page-container">
    <div class="mdl-card mdl-cell--12-col mdl-shadow--4dp">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title--text">
                Preview State
            </h2>
        </div>
        
<div class="mdl-card__supporting-text">
  <h2 id="current-functionality">Current Functionality</h2>

<p>Return to pyTEM <a href="/pytem.html">here</a>.
This state is is the entry point to the system. It is the default state at start up and will also be the state that the system will revert to upon detecting an error that does not crash the system.</p>

<h3 id="preview-state-logic">Preview State Logic</h3>

<p>Upon entering this state the system will continuously acquire images from the XIMEA camera and each image frame will be minimally processed. The images are then JPEG encoded and sent to python which pushes them to a websocket to display on a browser based UI.</p>

<div class="diagram"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0.00 0.00 1664.74 1246.51">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(144 1102.51)">
<title>%3</title>
<g id="clust1" class="cluster">
<title>cluster_opencv_graph</title>
<path fill="#e5f5fd" stroke="#aeb6be" d="M512.08,-343.68C512.08,-343.68 1083.07,-343.68 1083.07,-343.68 1089.07,-343.68 1095.07,-349.68 1095.07,-355.68 1095.07,-355.68 1095.07,-856.37 1095.07,-856.37 1095.07,-862.37 1089.07,-868.37 1083.07,-868.37 1083.07,-868.37 512.08,-868.37 512.08,-868.37 506.08,-868.37 500.08,-862.37 500.08,-856.37 500.08,-856.37 500.08,-355.68 500.08,-355.68 500.08,-349.68 506.08,-343.68 512.08,-343.68" />
<text text-anchor="middle" x="550.58" y="-854.77" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">opencv_graph</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_pyTEMCA</title>
<path fill="#e5f5fd" stroke="#aeb6be" d="M153.71,-161.42C153.71,-161.42 401.02,-161.42 401.02,-161.42 407.02,-161.42 413.02,-167.42 413.02,-173.42 413.02,-173.42 413.02,-419.82 413.02,-419.82 413.02,-425.82 407.02,-431.82 401.02,-431.82 401.02,-431.82 153.71,-431.82 153.71,-431.82 147.71,-431.82 141.71,-425.82 141.71,-419.82 141.71,-419.82 141.71,-173.42 141.71,-173.42 141.71,-167.42 147.71,-161.42 153.71,-161.42" />
<text text-anchor="middle" x="178.21" y="-418.22" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">pyTEMCA</text>
</g>
<!-- df1674b39c904f7c80cf21a49b62b5d1 -->
<g id="node1" class="node">
<title>df1674b39c904f7c80cf21a49b62b5d1</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="994.069" y="-856.683" />
<text text-anchor="middle" x="1044.57" y="-734.97" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Acquire Image</text>
</g>
<!-- a8b58d7ad79644fbba1874dfea11e37d -->
<g id="node2" class="node">
<title>a8b58d7ad79644fbba1874dfea11e37d</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="807.149" y="-736.713" />
<text text-anchor="middle" x="857.65" y="-614.5" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Flat Field Correction</text>
<text text-anchor="middle" x="857.65" y="-600.5" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">and CLAHE (CUDA)</text>
</g>
<!-- df1674b39c904f7c80cf21a49b62b5d1&#45;&gt;a8b58d7ad79644fbba1874dfea11e37d -->
<g id="edge1" class="edge">
<title>df1674b39c904f7c80cf21a49b62b5d1-&gt;a8b58d7ad79644fbba1874dfea11e37d</title>
<path fill="none" stroke="#7b8894" d="M993.99,-767.4C970.19,-752.13 941.67,-733.83 916.87,-717.91" />
<polygon fill="#7b8894" stroke="#7b8894" points="918.58,-714.85 908.27,-712.39 914.8,-720.74 918.58,-714.85" />
</g>
<!-- c9db1a4a0e9a4b1985eae9a79c803fa2 -->
<g id="node3" class="node">
<title>c9db1a4a0e9a4b1985eae9a79c803fa2</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="752.823" y="-483.493" />
<text text-anchor="middle" x="803.32" y="-361.28" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Calculate Stats</text>
<text text-anchor="middle" x="803.32" y="-347.28" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">(Min/Max/Mean)</text>
</g>
<!-- a8b58d7ad79644fbba1874dfea11e37d&#45;&gt;c9db1a4a0e9a4b1985eae9a79c803fa2 -->
<g id="edge4" class="edge">
<title>a8b58d7ad79644fbba1874dfea11e37d-&gt;c9db1a4a0e9a4b1985eae9a79c803fa2</title>
<path fill="none" stroke="#7b8894" d="M839.79,-596.64C834.52,-572.08 828.72,-545.04 823.32,-519.9" />
<polygon fill="#7b8894" stroke="#7b8894" points="826.72,-519.04 821.2,-510 819.87,-520.51 826.72,-519.04" />
</g>
<!-- 1fe3f3f8a4794c7191cb9e960f6b8cf6 -->
<g id="node4" class="node">
<title>1fe3f3f8a4794c7191cb9e960f6b8cf6</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="551.591" y="-795.155" />
<text text-anchor="middle" x="602.09" y="-673.44" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Calculate FFT Focus Score</text>
</g>
<!-- a8b58d7ad79644fbba1874dfea11e37d&#45;&gt;1fe3f3f8a4794c7191cb9e960f6b8cf6 -->
<g id="edge6" class="edge">
<title>a8b58d7ad79644fbba1874dfea11e37d-&gt;1fe3f3f8a4794c7191cb9e960f6b8cf6</title>
<path fill="none" stroke="#7b8894" d="M806.85,-691.52C765.39,-701 706.7,-714.42 662.77,-724.47" />
<polygon fill="#7b8894" stroke="#7b8894" points="661.76,-721.11 652.79,-726.75 663.32,-727.93 661.76,-721.11" />
</g>
<!-- ef36da6adfaa4539b08aac751eb07bc9 -->
<g id="node5" class="node">
<title>ef36da6adfaa4539b08aac751eb07bc9</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="646.307" y="-650.155" />
<text text-anchor="middle" x="696.81" y="-528.44" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">JPEG Compress</text>
</g>
<!-- a8b58d7ad79644fbba1874dfea11e37d&#45;&gt;ef36da6adfaa4539b08aac751eb07bc9 -->
<g id="edge2" class="edge">
<title>a8b58d7ad79644fbba1874dfea11e37d-&gt;ef36da6adfaa4539b08aac751eb07bc9</title>
<path fill="none" stroke="#7b8894" d="M806.76,-652.51C790.76,-643.9 772.95,-634.32 756.41,-625.42" />
<polygon fill="#7b8894" stroke="#7b8894" points="757.83,-622.21 747.37,-620.55 754.51,-628.37 757.83,-622.21" />
</g>
<!-- e199b73146f641e39a68c99d4f102128 -->
<g id="node6" class="node">
<title>e199b73146f641e39a68c99d4f102128</title>
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="500.08" y="-538.961" />
<text text-anchor="middle" x="550.58" y="-416.75" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Send to Python</text>
<text text-anchor="middle" x="550.58" y="-402.75" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">via pybind11</text>
</g>
<!-- c9db1a4a0e9a4b1985eae9a79c803fa2&#45;&gt;e199b73146f641e39a68c99d4f102128 -->
<g id="edge5" class="edge">
<title>c9db1a4a0e9a4b1985eae9a79c803fa2-&gt;e199b73146f641e39a68c99d4f102128</title>
<path fill="none" stroke="#7b8894" d="M752.78,-437.77C712.02,-446.72 654.56,-459.33 611.3,-468.82" />
<polygon fill="#7b8894" stroke="#7b8894" points="610.48,-465.42 601.46,-470.98 611.98,-472.26 610.48,-465.42" />
</g>
<!-- 1fe3f3f8a4794c7191cb9e960f6b8cf6&#45;&gt;e199b73146f641e39a68c99d4f102128 -->
<g id="edge7" class="edge">
<title>1fe3f3f8a4794c7191cb9e960f6b8cf6-&gt;e199b73146f641e39a68c99d4f102128</title>
<path fill="none" stroke="#7b8894" d="M588.29,-669.69C582.48,-640.8 575.63,-606.73 569.37,-575.61" />
<polygon fill="#7b8894" stroke="#7b8894" points="572.76,-574.73 567.36,-565.62 565.9,-576.11 572.76,-574.73" />
</g>
<!-- ef36da6adfaa4539b08aac751eb07bc9&#45;&gt;e199b73146f641e39a68c99d4f102128 -->
<g id="edge3" class="edge">
<title>ef36da6adfaa4539b08aac751eb07bc9-&gt;e199b73146f641e39a68c99d4f102128</title>
<path fill="none" stroke="#7b8894" d="M646.07,-554.76C634.28,-545.79 621.62,-536.17 609.51,-526.96" />
<polygon fill="#7b8894" stroke="#7b8894" points="611.3,-523.93 601.22,-520.66 607.06,-529.5 611.3,-523.93" />
</g>
<!-- 7a11db5bface41459821e61ba3419e59 -->
<g id="node7" class="node">
<title>7a11db5bface41459821e61ba3419e59</title>
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="312.016" y="-413.815" />
<text text-anchor="middle" x="362.52" y="-298.42" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Encode Image</text>
</g>
<!-- e199b73146f641e39a68c99d4f102128&#45;&gt;7a11db5bface41459821e61ba3419e59 -->
<g id="edge8" class="edge">
<title>e199b73146f641e39a68c99d4f102128-&gt;7a11db5bface41459821e61ba3419e59</title>
<path fill="none" stroke="#7b8894" d="M499.69,-449.99C475.65,-434.8 446.82,-416.58 421.8,-400.77" />
<polygon fill="#7b8894" stroke="#7b8894" points="423.45,-397.68 413.12,-395.29 419.71,-403.59 423.45,-397.68" />
</g>
<!-- e777d7e4f25948c3a3ed1a2aeb3c4272 -->
<g id="node8" class="node">
<title>e777d7e4f25948c3a3ed1a2aeb3c4272</title>
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="141.713" y="-280.422" />
<text text-anchor="middle" x="192.21" y="-165.02" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Publish Image</text>
</g>
<!-- 7a11db5bface41459821e61ba3419e59&#45;&gt;e777d7e4f25948c3a3ed1a2aeb3c4272 -->
<g id="edge9" class="edge">
<title>7a11db5bface41459821e61ba3419e59-&gt;e777d7e4f25948c3a3ed1a2aeb3c4272</title>
<path fill="none" stroke="#7b8894" d="M311.88,-323.65C292.75,-308.67 270.82,-291.49 251,-275.97" />
<polygon fill="#7b8894" stroke="#7b8894" points="252.98,-273.07 242.95,-269.66 248.66,-278.58 252.98,-273.07" />
</g>
<!-- 801b2855fb3144babb2b28f69b37078e -->
<g id="node9" class="node">
<title>801b2855fb3144babb2b28f69b37078e</title>
<image xlink:href="/icons/user.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="0" y="-119" />
<text text-anchor="middle" x="50.5" y="-3.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Web UI</text>
</g>
<!-- e777d7e4f25948c3a3ed1a2aeb3c4272&#45;&gt;801b2855fb3144babb2b28f69b37078e -->
<g id="edge10" class="edge">
<title>e777d7e4f25948c3a3ed1a2aeb3c4272-&gt;801b2855fb3144babb2b28f69b37078e</title>
<path fill="none" stroke="#7b8894" d="M141.45,-172.1C130.6,-159.74 119.06,-146.6 107.98,-133.97" />
<polygon fill="#7b8894" stroke="#7b8894" points="110.37,-131.39 101.14,-126.19 105.11,-136.01 110.37,-131.39" />
</g>
<!-- 87f42c27bb664634b6231634c6bc7c49 -->
<g id="node10" class="node">
<title>87f42c27bb664634b6231634c6bc7c49</title>
<image xlink:href="/icons/decision.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="1190.06" y="-940.511" />
<text text-anchor="middle" x="1240.56" y="-825.11" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">State Changed?</text>
</g>
<!-- 87f42c27bb664634b6231634c6bc7c49&#45;&gt;df1674b39c904f7c80cf21a49b62b5d1 -->
<g id="edge12" class="edge">
<title>87f42c27bb664634b6231634c6bc7c49-&gt;df1674b39c904f7c80cf21a49b62b5d1</title>
<path fill="none" stroke="#7b8894" d="M1189.84,-866.68C1163.76,-854.69 1131.81,-840 1104.53,-827.45" />
<polygon fill="#7b8894" stroke="#7b8894" points="1105.63,-824.1 1095.09,-823.1 1102.71,-830.46 1105.63,-824.1" />
</g>
<!-- 87f42c27bb664634b6231634c6bc7c49&#45;&gt;87f42c27bb664634b6231634c6bc7c49 -->
<g id="edge11" class="edge">
<title>87f42c27bb664634b6231634c6bc7c49-&gt;87f42c27bb664634b6231634c6bc7c49</title>
<path fill="none" stroke="#7b8894" d="M1291.54,-905.88C1314.34,-907.4 1334.06,-902.11 1334.06,-890.01 1334.06,-879.76 1319.89,-874.4 1301.69,-873.92" />
<polygon fill="#7b8894" stroke="#7b8894" points="1301.46,-870.42 1291.54,-874.14 1301.61,-877.42 1301.46,-870.42" />
<text text-anchor="middle" x="1353.24" y="-895.23" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Repeat</text>
</g>
</g>
</svg></div>

</div>
    </div>
</div>
        <footer class="mdl-mega-footer">
  <div class="mdl-mega-footer__middle-section">
    
  </div>
  <div class="mdl-mega-footer__bottom-section">
    <ul class="mdl-mega-footer__link-list">
      
    </ul>
  </div>
</footer>

      </main>
    </div>
  </body>
</html>
