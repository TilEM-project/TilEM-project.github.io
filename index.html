<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>TEM Architecture - TEM Architecture</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
<!-- <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.-.min.css"/> -->
<link rel="stylesheet" href="/assets/css/style.css"/>
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/font-awesome.min.css"> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
<!-- <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> -->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>

  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <!-- <div class="mdl-layout--fixed-header mdl-layout__header--scroll"> -->
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">
        <a href="/">TEM Architecture</a>
      </span>
      <div class="mdl-layout-spacer mdl-layout--large-screen-only"></div>
      <nav class="mdl-navigation mdl-layout--large-screen-only">
        
          <a class="mdl-navigation__link" href="/topics.html">Topics</a>
        
          <a class="mdl-navigation__link" href="/assignments.html">Assignments</a>
        
      </nav>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">TEM Architecture</span>
    <nav class="mdl-navigation">
      
        <a class="mdl-navigation__link" href="/topics.html">Topics</a>
        
      
        <a class="mdl-navigation__link" href="/assignments.html">Assignments</a>
        
      
        <a class="mdl-navigation__link" href="/unassigned.html">Unassigned</a>
        
      
    </nav>
  </div>
<!-- </div> -->

      <main class="mdl-layout__content">
        <div class="mdl-grid page-container">
    <div class="mdl-card mdl-cell--12-col mdl-shadow--4dp">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title--text">
                TEM Architecture
            </h2>
        </div>
        
<div class="mdl-card__supporting-text">
  
  <p>Welcome to the documentation for the <a href="https://alleninstitute.org/">Allen Institute</a> next generation TEM data acquisition system.
This system is used at the Allen Institute for Brain Science to do large-scale high-throughput TEM imaging of brain tissue.
The system is primarily comprised of a number of Docker containers communicating via a message broker.
Using this architecture, the system is modular, high performance, and stable.</p>

<p>An overview of the architecture is as follows, the <a href="/pytem.html">pyTEM</a> service is a hierarchical state machine that coordinates the entire system.
This service includes the routines for auto-focusing the microscope, centering the beam, etc, all encoded as state machines.
Communication is handled by a <a href="/broker.html">message broker</a> and our <a href="https://pypi.org/project/pigeon-client/">Pigeon</a> client library.
Under the hood this uses the <a href="https://stomp.github.io/">STOMP</a> protocol for communication.
There are also services which handle communication with a single piece of hardware, such as the <a href="/scope.html">scope</a>, <a href="/stage.html">stage</a>, and <a href="/camera.html">camera</a>.
Once an image (tile) is collected from the camera it is saved to disk and a message is sent to the <a href="/pipeline.html">image processing pipeline</a>.
This pipeline performs some simple image processing such as flatfield correction and contrast enhancement, calculates some statistics, such as min, max, and mean image values, a histogram, and a focus quality metric, and finally checks that there is overlap between tiles.
These metrics are received by two services, the first of which is the <a href="/qc.html">QC</a> which monitors the tile statistics to ensure there are no errors in the acquisition.
If any errors are detected, a message will be sent to pyTEM instructing it to either immediately stop imaging, or stop imaging at the end of the montage.
The second service is the <a href="/buffer.html">buffer</a> which collects the processed images, and the statistics.
After a montage is completed successfully, this service sends the tiles and metadata to <a href="/aloha.html">aloha</a> via HTTP.
This service</p>

<p>This is an event driven system with various components running in docker containers, along with other services running on other machines.
Below, is a diagram showing a general overview of this system.</p>

<div class="diagram"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0.00 0.00 1346.00 1157.25">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(144 1013.25)">
<title>%3</title>
<g id="clust1" class="cluster">
<title>cluster_AWS</title>
<path fill="#ffe0b2" stroke="#aeb6be" d="M650,-413.25C650,-413.25 886.5,-413.25 886.5,-413.25 892.5,-413.25 898.5,-419.25 898.5,-425.25 898.5,-425.25 898.5,-538.25 898.5,-538.25 898.5,-544.25 892.5,-550.25 886.5,-550.25 886.5,-550.25 650,-550.25 650,-550.25 644,-550.25 638,-544.25 638,-538.25 638,-538.25 638,-425.25 638,-425.25 638,-419.25 644,-413.25 650,-413.25" />
<text text-anchor="middle" x="660" y="-536.65" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">AWS</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Docker Compose</title>
<path fill="#e0f2f1" stroke="#aeb6be" d="M171.5,0C171.5,0 567.5,0 567.5,0 573.5,0 579.5,-6 579.5,-12 579.5,-12 579.5,-712.25 579.5,-712.25 579.5,-718.25 573.5,-724.25 567.5,-724.25 567.5,-724.25 171.5,-724.25 171.5,-724.25 165.5,-724.25 159.5,-718.25 159.5,-712.25 159.5,-712.25 159.5,-12 159.5,-12 159.5,-6 165.5,0 171.5,0" />
<text text-anchor="middle" x="219" y="-710.65" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">Docker Compose</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Platform9</title>
<path fill="#b2ffc7" stroke="#aeb6be" d="M809.5,-174C809.5,-174 1046,-174 1046,-174 1052,-174 1058,-180 1058,-186 1058,-186 1058,-299 1058,-299 1058,-305 1052,-311 1046,-311 1046,-311 809.5,-311 809.5,-311 803.5,-311 797.5,-305 797.5,-299 797.5,-299 797.5,-186 797.5,-186 797.5,-180 803.5,-174 809.5,-174" />
<text text-anchor="middle" x="835" y="-297.4" font-family="Sans-Serif" font-size="12.00" fill="#2d3436">Platform9</text>
</g>
<!-- cf8eed15f78c4c868f6f3f701f316c5d -->
<g id="node1" class="node">
<title>cf8eed15f78c4c868f6f3f701f316c5d</title>
<image xlink:href="/icons/database.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="797.5" y="-532.25" />
<text text-anchor="middle" x="848" y="-416.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Database</text>
</g>
<!-- 4e577b850a9f4ec1866e4f2a427b5021 -->
<g id="node2" class="node">
<title>4e577b850a9f4ec1866e4f2a427b5021</title>
<g id="a_node2"><a xlink:href="/tem_db.html" xlink:title="TEM DB">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="638" y="-532.25" />
<text text-anchor="middle" x="688.5" y="-416.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">TEM DB</text>
</a>
</g>
</g>
<!-- 4e577b850a9f4ec1866e4f2a427b5021&#45;&gt;cf8eed15f78c4c868f6f3f701f316c5d -->
<g id="edge3" class="edge">
<title>4e577b850a9f4ec1866e4f2a427b5021-&gt;cf8eed15f78c4c868f6f3f701f316c5d</title>
<path fill="none" stroke="#7b8894" d="M749.59,-481.75C761.9,-481.75 774.84,-481.75 787.15,-481.75" />
<polygon fill="#7b8894" stroke="#7b8894" points="749.41,-478.25 739.41,-481.75 749.41,-485.25 749.41,-478.25" />
<polygon fill="#7b8894" stroke="#7b8894" points="787.3,-485.25 797.3,-481.75 787.3,-478.25 787.3,-485.25" />
</g>
<!-- ee3e999eee544cba97f11aaec8b7fca3 -->
<g id="node8" class="node">
<title>ee3e999eee544cba97f11aaec8b7fca3</title>
<g id="a_node8"><a xlink:href="/pytem.html" xlink:title="pyTEM">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="319" y="-532.25" />
<text text-anchor="middle" x="369.5" y="-416.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">pyTEM</text>
</a>
</g>
</g>
<!-- 4e577b850a9f4ec1866e4f2a427b5021&#45;&gt;ee3e999eee544cba97f11aaec8b7fca3 -->
<g id="edge5" class="edge">
<title>4e577b850a9f4ec1866e4f2a427b5021-&gt;ee3e999eee544cba97f11aaec8b7fca3</title>
<path fill="none" stroke="#7b8894" d="M637.95,-481.75C581.57,-481.75 490.39,-481.75 430.2,-481.75" />
<polygon fill="#7b8894" stroke="#7b8894" points="430.07,-478.25 420.07,-481.75 430.07,-485.25 430.07,-478.25" />
</g>
<!-- 744d6806964d477692fbe32abf81fce4 -->
<g id="node20" class="node">
<title>744d6806964d477692fbe32abf81fce4</title>
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="797.5" y="-293" />
<text text-anchor="middle" x="848" y="-177.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">AC/QC</text>
</g>
<!-- 4e577b850a9f4ec1866e4f2a427b5021&#45;&gt;744d6806964d477692fbe32abf81fce4 -->
<g id="edge4" class="edge">
<title>4e577b850a9f4ec1866e4f2a427b5021-&gt;744d6806964d477692fbe32abf81fce4</title>
<path fill="none" stroke="#7b8894" d="M739.8,-404.81C758.01,-377.49 778.5,-346.75 796.71,-319.43" />
<polygon fill="#7b8894" stroke="#7b8894" points="736.84,-402.93 734.21,-413.19 742.67,-406.81 736.84,-402.93" />
<polygon fill="#7b8894" stroke="#7b8894" points="799.65,-321.33 802.29,-311.07 793.83,-317.45 799.65,-321.33" />
</g>
<!-- d45f885b282e454ca2d4e13f9c4478d9 -->
<g id="node3" class="node">
<title>d45f885b282e454ca2d4e13f9c4478d9</title>
<g id="a_node3"><a xlink:href="/aloha.html" xlink:title="Aloha">
<image xlink:href="/icons/lambda-function.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="638" y="-133.5" />
<text text-anchor="middle" x="688.5" y="-18.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Aloha</text>
</a>
</g>
</g>
<!-- d45f885b282e454ca2d4e13f9c4478d9&#45;&gt;4e577b850a9f4ec1866e4f2a427b5021 -->
<g id="edge18" class="edge">
<title>d45f885b282e454ca2d4e13f9c4478d9-&gt;4e577b850a9f4ec1866e4f2a427b5021</title>
<path fill="none" stroke="#7b8894" d="M688.5,-151.55C688.5,-221.41 688.5,-329.64 688.5,-402.99" />
<polygon fill="#7b8894" stroke="#7b8894" points="685,-403.1 688.5,-413.1 692,-403.1 685,-403.1" />
</g>
<!-- 02b735888158471484d341761d99509d -->
<g id="node4" class="node">
<title>02b735888158471484d341761d99509d</title>
<image xlink:href="/icons/simple-storage-service-s3.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="797.5" y="-133.5" />
<text text-anchor="middle" x="848" y="-18.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Storage Bucket</text>
</g>
<!-- 02b735888158471484d341761d99509d&#45;&gt;d45f885b282e454ca2d4e13f9c4478d9 -->
<g id="edge17" class="edge">
<title>02b735888158471484d341761d99509d-&gt;d45f885b282e454ca2d4e13f9c4478d9</title>
<path fill="none" stroke="#7b8894" d="M786.91,-83C771.15,-83 754.36,-83 739.2,-83" />
<polygon fill="#7b8894" stroke="#7b8894" points="787.09,-86.5 797.09,-83 787.09,-79.5 787.09,-86.5" />
</g>
<!-- 02b735888158471484d341761d99509d&#45;&gt;744d6806964d477692fbe32abf81fce4 -->
<g id="edge2" class="edge">
<title>02b735888158471484d341761d99509d-&gt;744d6806964d477692fbe32abf81fce4</title>
<path fill="none" stroke="#7b8894" d="M848,-151.57C848,-155.63 848,-159.73 848,-163.83" />
<polygon fill="#7b8894" stroke="#7b8894" points="844.5,-163.99 848,-173.99 851.5,-163.99 844.5,-163.99" />
</g>
<!-- 8d4ec7e462da4e5196ec1866056b0684 -->
<g id="node5" class="node">
<title>8d4ec7e462da4e5196ec1866056b0684</title>
<image xlink:href="/icons/client.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="957" y="-452.5" />
<text text-anchor="middle" x="1007.5" y="-337.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">AC/QC user</text>
</g>
<!-- 8d4ec7e462da4e5196ec1866056b0684&#45;&gt;744d6806964d477692fbe32abf81fce4 -->
<g id="edge6" class="edge">
<title>8d4ec7e462da4e5196ec1866056b0684-&gt;744d6806964d477692fbe32abf81fce4</title>
<path fill="none" stroke="#7b8894" d="M949.11,-343.61C935.03,-329.53 920,-314.5 905.95,-300.45" />
<polygon fill="#7b8894" stroke="#7b8894" points="947.05,-346.5 956.59,-351.09 952,-341.55 947.05,-346.5" />
<polygon fill="#7b8894" stroke="#7b8894" points="908.24,-297.79 898.7,-293.2 903.29,-302.74 908.24,-297.79" />
</g>
<!-- b01a7c16cda2494eafade7a2b30c12f7 -->
<g id="node6" class="node">
<title>b01a7c16cda2494eafade7a2b30c12f7</title>
<g id="a_node6"><a xlink:href="/ui.html" xlink:title="Microscope Operator">
<image xlink:href="/icons/client.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="0" y="-452.5" />
<text text-anchor="middle" x="50.5" y="-337.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Microscope Operator</text>
</a>
</g>
</g>
<!-- b01a7c16cda2494eafade7a2b30c12f7&#45;&gt;ee3e999eee544cba97f11aaec8b7fca3 -->
<g id="edge13" class="edge">
<title>b01a7c16cda2494eafade7a2b30c12f7-&gt;ee3e999eee544cba97f11aaec8b7fca3</title>
<path fill="none" stroke="#7b8894" d="M110.8,-417.07C167.57,-431.27 252.16,-452.41 309,-466.63" />
<polygon fill="#7b8894" stroke="#7b8894" points="111.6,-413.67 101.05,-414.64 109.9,-420.46 111.6,-413.67" />
<polygon fill="#7b8894" stroke="#7b8894" points="308.38,-470.08 318.93,-469.11 310.07,-463.29 308.38,-470.08" />
</g>
<!-- b15f0c892f6c46eaa1f20f2542f04187 -->
<g id="node7" class="node">
<title>b15f0c892f6c46eaa1f20f2542f04187</title>
<g id="a_node7"><a xlink:href="/broker.html" xlink:title="ActiveMQ">
<image xlink:href="/icons/activemq.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="159.5" y="-133.5" />
<text text-anchor="middle" x="210" y="-18.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">ActiveMQ</text>
</a>
</g>
</g>
<!-- fe87b5d8589f4e569d7c18127c253144 -->
<g id="node9" class="node">
<title>fe87b5d8589f4e569d7c18127c253144</title>
<g id="a_node9"><a xlink:href="/scope.html" xlink:title="Microscope&#10;Service">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="478.5" y="-691.75" />
<text text-anchor="middle" x="529" y="-575.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Microscope</text>
<text text-anchor="middle" x="529" y="-561.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Service</text>
</a>
</g>
</g>
<!-- ee3e999eee544cba97f11aaec8b7fca3&#45;&gt;fe87b5d8589f4e569d7c18127c253144 -->
<g id="edge7" class="edge">
<title>ee3e999eee544cba97f11aaec8b7fca3-&gt;fe87b5d8589f4e569d7c18127c253144</title>
<path fill="none" stroke="#7b8894" d="M427.89,-540.14C441.97,-554.22 457,-569.25 471.05,-583.3" />
<polygon fill="#7b8894" stroke="#7b8894" points="429.95,-537.25 420.41,-532.66 425,-542.2 429.95,-537.25" />
<polygon fill="#7b8894" stroke="#7b8894" points="468.76,-585.96 478.3,-590.55 473.71,-581.01 468.76,-585.96" />
</g>
<!-- b258bb1e503a4a85bc5161a5b700d6d8 -->
<g id="node10" class="node">
<title>b258bb1e503a4a85bc5161a5b700d6d8</title>
<g id="a_node10"><a xlink:href="/camera.html" xlink:title="Camera&#10;Service">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="159.5" y="-691.75" />
<text text-anchor="middle" x="210" y="-575.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Camera</text>
<text text-anchor="middle" x="210" y="-561.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Service</text>
</a>
</g>
</g>
<!-- ee3e999eee544cba97f11aaec8b7fca3&#45;&gt;b258bb1e503a4a85bc5161a5b700d6d8 -->
<g id="edge8" class="edge">
<title>ee3e999eee544cba97f11aaec8b7fca3-&gt;b258bb1e503a4a85bc5161a5b700d6d8</title>
<path fill="none" stroke="#7b8894" d="M311.11,-540.14C297.03,-554.22 282,-569.25 267.95,-583.3" />
<polygon fill="#7b8894" stroke="#7b8894" points="314,-542.2 318.59,-532.66 309.05,-537.25 314,-542.2" />
<polygon fill="#7b8894" stroke="#7b8894" points="265.29,-581.01 260.7,-590.55 270.24,-585.96 265.29,-581.01" />
</g>
<!-- a7c81b8a00b94b7586bc2e06c3fd027a -->
<g id="node11" class="node">
<title>a7c81b8a00b94b7586bc2e06c3fd027a</title>
<g id="a_node11"><a xlink:href="/stage.html" xlink:title="Stage&#10;Service">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="319" y="-691.75" />
<text text-anchor="middle" x="369.5" y="-575.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Stage</text>
<text text-anchor="middle" x="369.5" y="-561.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Service</text>
</a>
</g>
</g>
<!-- ee3e999eee544cba97f11aaec8b7fca3&#45;&gt;a7c81b8a00b94b7586bc2e06c3fd027a -->
<g id="edge9" class="edge">
<title>ee3e999eee544cba97f11aaec8b7fca3-&gt;a7c81b8a00b94b7586bc2e06c3fd027a</title>
<path fill="none" stroke="#7b8894" d="M369.5,-557.71C369.5,-557.8 369.5,-557.88 369.5,-557.96" />
<polygon fill="#7b8894" stroke="#7b8894" points="373,-560.32 369.5,-550.32 366,-560.32 373,-560.32" />
<polygon fill="#7b8894" stroke="#7b8894" points="366,-548.21 369.5,-558.21 373,-548.21 366,-548.21" />
</g>
<!-- e3d67ddac39945ad9eab6a77da0328cf -->
<g id="node12" class="node">
<title>e3d67ddac39945ad9eab6a77da0328cf</title>
<g id="a_node12"><a xlink:href="/pipeline.html" xlink:title="Image Processing&#10;Pipeline">
<image xlink:href="/icons/cpp.png" width="101px" height="113.625px" preserveAspectRatio="xMinYMin meet" x="319" y="-379.063" />
<text text-anchor="middle" x="369.5" y="-256.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Image Processing</text>
<text text-anchor="middle" x="369.5" y="-242.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Pipeline</text>
</a>
</g>
</g>
<!-- ee3e999eee544cba97f11aaec8b7fca3&#45;&gt;e3d67ddac39945ad9eab6a77da0328cf -->
<g id="edge10" class="edge">
<title>ee3e999eee544cba97f11aaec8b7fca3-&gt;e3d67ddac39945ad9eab6a77da0328cf</title>
<path fill="none" stroke="#7b8894" d="M369.5,-413.18C369.5,-413.02 369.5,-412.85 369.5,-412.69" />
<polygon fill="#7b8894" stroke="#7b8894" points="373,-415.29 369.5,-405.29 366,-415.29 373,-415.29" />
</g>
<!-- e3d67ddac39945ad9eab6a77da0328cf&#45;&gt;b01a7c16cda2494eafade7a2b30c12f7 -->
<g id="edge19" class="edge">
<title>e3d67ddac39945ad9eab6a77da0328cf-&gt;b01a7c16cda2494eafade7a2b30c12f7</title>
<path fill="none" stroke="#7b8894" d="M318.95,-334.89C262.45,-349.01 171.02,-371.87 110.82,-386.92" />
<polygon fill="#7b8894" stroke="#7b8894" points="109.93,-383.54 101.07,-389.36 111.62,-390.33 109.93,-383.54" />
</g>
<!-- a66a3d4dcdfb47b1bade232bce773652 -->
<g id="node13" class="node">
<title>a66a3d4dcdfb47b1bade232bce773652</title>
<g id="a_node13"><a xlink:href="/buffer.html" xlink:title="Buffer&#10;Service">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="478.5" y="-133.5" />
<text text-anchor="middle" x="529" y="-17.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Buffer</text>
<text text-anchor="middle" x="529" y="-3.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Service</text>
</a>
</g>
</g>
<!-- e3d67ddac39945ad9eab6a77da0328cf&#45;&gt;a66a3d4dcdfb47b1bade232bce773652 -->
<g id="edge11" class="edge">
<title>e3d67ddac39945ad9eab6a77da0328cf-&gt;a66a3d4dcdfb47b1bade232bce773652</title>
<path fill="none" stroke="#7b8894" d="M420.19,-246.22C436.9,-221.14 455.6,-193.1 472.71,-167.44" />
<polygon fill="#7b8894" stroke="#7b8894" points="475.81,-169.09 478.45,-158.83 469.99,-165.21 475.81,-169.09" />
</g>
<!-- da8e0ed710954df585d3b782e3f76884 -->
<g id="node14" class="node">
<title>da8e0ed710954df585d3b782e3f76884</title>
<g id="a_node14"><a xlink:href="/qc.html" xlink:title="QC Service">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="478.5" y="-452.5" />
<text text-anchor="middle" x="529" y="-337.1" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">QC Service</text>
</a>
</g>
</g>
<!-- e3d67ddac39945ad9eab6a77da0328cf&#45;&gt;da8e0ed710954df585d3b782e3f76884 -->
<g id="edge20" class="edge">
<title>e3d67ddac39945ad9eab6a77da0328cf-&gt;da8e0ed710954df585d3b782e3f76884</title>
<path fill="none" stroke="#7b8894" d="M420.41,-347.7C435.88,-355.44 453.02,-364.01 469.03,-372.02" />
<polygon fill="#7b8894" stroke="#7b8894" points="467.8,-375.31 478.3,-376.65 470.93,-369.05 467.8,-375.31" />
</g>
<!-- 5181f71f26ff49f7a50fa2dd45d6c0a8 -->
<g id="node15" class="node">
<title>5181f71f26ff49f7a50fa2dd45d6c0a8</title>
<g id="a_node15"><a xlink:href="/montage_fit.html" xlink:title="Montage Fit">
<image xlink:href="/icons/python.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="478.5" y="-293" />
<text text-anchor="middle" x="529" y="-177.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Montage Fit</text>
</a>
</g>
</g>
<!-- e3d67ddac39945ad9eab6a77da0328cf&#45;&gt;5181f71f26ff49f7a50fa2dd45d6c0a8 -->
<g id="edge22" class="edge">
<title>e3d67ddac39945ad9eab6a77da0328cf-&gt;5181f71f26ff49f7a50fa2dd45d6c0a8</title>
<path fill="none" stroke="#7b8894" d="M420.41,-296.8C435.88,-289.06 453.02,-280.49 469.03,-272.48" />
<polygon fill="#7b8894" stroke="#7b8894" points="470.93,-275.45 478.3,-267.85 467.8,-269.19 470.93,-275.45" />
</g>
<!-- a66a3d4dcdfb47b1bade232bce773652&#45;&gt;d45f885b282e454ca2d4e13f9c4478d9 -->
<g id="edge12" class="edge">
<title>a66a3d4dcdfb47b1bade232bce773652-&gt;d45f885b282e454ca2d4e13f9c4478d9</title>
<path fill="none" stroke="#7b8894" d="M579.91,-83C595.09,-83 611.88,-83 627.63,-83" />
<polygon fill="#7b8894" stroke="#7b8894" points="627.8,-86.5 637.8,-83 627.8,-79.5 627.8,-86.5" />
</g>
<!-- da8e0ed710954df585d3b782e3f76884&#45;&gt;ee3e999eee544cba97f11aaec8b7fca3 -->
<g id="edge21" class="edge">
<title>da8e0ed710954df585d3b782e3f76884-&gt;ee3e999eee544cba97f11aaec8b7fca3</title>
<path fill="none" stroke="#7b8894" d="M478.09,-427.45C462.62,-435.19 445.48,-443.76 429.47,-451.77" />
<polygon fill="#7b8894" stroke="#7b8894" points="427.57,-448.8 420.2,-456.4 430.7,-455.06 427.57,-448.8" />
</g>
<!-- 5181f71f26ff49f7a50fa2dd45d6c0a8&#45;&gt;a66a3d4dcdfb47b1bade232bce773652 -->
<g id="edge24" class="edge">
<title>5181f71f26ff49f7a50fa2dd45d6c0a8-&gt;a66a3d4dcdfb47b1bade232bce773652</title>
<path fill="none" stroke="#7b8894" d="M529,-173.93C529,-173.77 529,-173.6 529,-173.44" />
<polygon fill="#7b8894" stroke="#7b8894" points="532.5,-176.04 529,-166.04 525.5,-176.04 532.5,-176.04" />
</g>
<!-- 5181f71f26ff49f7a50fa2dd45d6c0a8&#45;&gt;da8e0ed710954df585d3b782e3f76884 -->
<g id="edge23" class="edge">
<title>5181f71f26ff49f7a50fa2dd45d6c0a8-&gt;da8e0ed710954df585d3b782e3f76884</title>
<path fill="none" stroke="#7b8894" d="M529,-311.07C529,-315.13 529,-319.23 529,-323.33" />
<polygon fill="#7b8894" stroke="#7b8894" points="525.5,-323.49 529,-333.49 532.5,-323.49 525.5,-323.49" />
</g>
<!-- bd88b2138e6e48339e73e1b036a4cf0a -->
<g id="node16" class="node">
<title>bd88b2138e6e48339e73e1b036a4cf0a</title>
<image xlink:href="/icons/TEM.png" width="101px" height="129.671px" preserveAspectRatio="xMinYMin meet" x="478.5" y="-865.586" />
<text text-anchor="middle" x="529" y="-735.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Microscope</text>
</g>
<!-- bd88b2138e6e48339e73e1b036a4cf0a&#45;&gt;fe87b5d8589f4e569d7c18127c253144 -->
<g id="edge14" class="edge">
<title>bd88b2138e6e48339e73e1b036a4cf0a-&gt;fe87b5d8589f4e569d7c18127c253144</title>
<path fill="none" stroke="#7b8894" d="M529,-724.79C529,-724.7 529,-724.62 529,-724.54" />
<polygon fill="#7b8894" stroke="#7b8894" points="525.5,-722.18 529,-732.18 532.5,-722.18 525.5,-722.18" />
<polygon fill="#7b8894" stroke="#7b8894" points="532.5,-734.29 529,-724.29 525.5,-734.29 532.5,-734.29" />
</g>
<!-- a339ea250ca54486a018b1fdfd21aa36 -->
<g id="node17" class="node">
<title>a339ea250ca54486a018b1fdfd21aa36</title>
<image xlink:href="/icons/stage.png" width="101px" height="73.1918px" preserveAspectRatio="xMinYMin meet" x="319" y="-837.346" />
<text text-anchor="middle" x="369.5" y="-735.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Stage</text>
</g>
<!-- a339ea250ca54486a018b1fdfd21aa36&#45;&gt;a7c81b8a00b94b7586bc2e06c3fd027a -->
<g id="edge15" class="edge">
<title>a339ea250ca54486a018b1fdfd21aa36-&gt;a7c81b8a00b94b7586bc2e06c3fd027a</title>
<path fill="none" stroke="#7b8894" d="M369.5,-724.79C369.5,-724.7 369.5,-724.62 369.5,-724.54" />
<polygon fill="#7b8894" stroke="#7b8894" points="366,-722.18 369.5,-732.18 373,-722.18 366,-722.18" />
<polygon fill="#7b8894" stroke="#7b8894" points="373,-734.29 369.5,-724.29 366,-734.29 373,-734.29" />
</g>
<!-- a09015cfaf784a4f8a05d6546f685785 -->
<g id="node18" class="node">
<title>a09015cfaf784a4f8a05d6546f685785</title>
<image xlink:href="/icons/camera.png" width="101px" height="89.843px" preserveAspectRatio="xMinYMin meet" x="159.5" y="-845.672" />
<text text-anchor="middle" x="210" y="-735.85" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Camera</text>
</g>
<!-- a09015cfaf784a4f8a05d6546f685785&#45;&gt;b258bb1e503a4a85bc5161a5b700d6d8 -->
<g id="edge16" class="edge">
<title>a09015cfaf784a4f8a05d6546f685785-&gt;b258bb1e503a4a85bc5161a5b700d6d8</title>
<path fill="none" stroke="#7b8894" d="M210,-724.79C210,-724.7 210,-724.62 210,-724.54" />
<polygon fill="#7b8894" stroke="#7b8894" points="206.5,-722.18 210,-732.18 213.5,-722.18 206.5,-722.18" />
<polygon fill="#7b8894" stroke="#7b8894" points="213.5,-734.29 210,-724.29 206.5,-734.29 213.5,-734.29" />
</g>
<!-- 177f7414527345b9b09bdc2f8139d96e -->
<g id="node19" class="node">
<title>177f7414527345b9b09bdc2f8139d96e</title>
<g id="a_node19"><a xlink:href="/log.html" xlink:title="Log Server">
<image xlink:href="/icons/loki.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="957" y="-293" />
<text text-anchor="middle" x="1007.5" y="-177.6" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Log Server</text>
</a>
</g>
</g>
<!-- 49c20d1aa8c342739a55469af1d05108 -->
<g id="node21" class="node">
<title>49c20d1aa8c342739a55469af1d05108</title>
<g id="a_node21"><a xlink:href="/registry.html" xlink:title="Container Registry">
<image xlink:href="/icons/docker.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="638" y="-691.75" />
<text text-anchor="middle" x="688.5" y="-576.35" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">Container Registry</text>
</a>
</g>
</g>
<!-- 6e21132d730f4ed982979d5ef5308c6e -->
<g id="node22" class="node">
<title>6e21132d730f4ed982979d5ef5308c6e</title>
<g id="a_node22"><a xlink:href="/runner.html" xlink:title="GitHub Actions">
<image xlink:href="/icons/github.png" width="101px" height="101px" preserveAspectRatio="xMinYMin meet" x="797.5" y="-691.75" />
<text text-anchor="middle" x="848" y="-576.35" font-family="Sans-Serif" font-size="13.00" fill="#2d3436">GitHub Actions</text>
</a>
</g>
</g>
<!-- 6e21132d730f4ed982979d5ef5308c6e&#45;&gt;49c20d1aa8c342739a55469af1d05108 -->
<g id="edge1" class="edge">
<title>6e21132d730f4ed982979d5ef5308c6e-&gt;49c20d1aa8c342739a55469af1d05108</title>
<path fill="none" stroke="#7b8894" d="M797.09,-641.25C781.91,-641.25 765.12,-641.25 749.37,-641.25" />
<polygon fill="#7b8894" stroke="#7b8894" points="749.2,-637.75 739.2,-641.25 749.2,-644.75 749.2,-637.75" />
</g>
</g>
</svg></div>

<p>Most of the nodes in this diagram are hyperlinks to further documentation of this system.</p>

<p>This system primarily sends messages between services using the <a href="https://stomp.github.io/">STOMP protocul</a> with the <a href="https://pypi.org/project/pigeon-client/">Pigeon</a> library.
The configuration for this system as a whole is stored on GitHub at <a href="https://github.com/AllenInstitute/TEM_config">AllenInstitute/TEM_config</a>.
This repository includes both a Docker compose file for starting all the services that are part of the system, and the configuration files for the services.</p>

</div>

    </div>
</div>
        <footer class="mdl-mega-footer">
  <div class="mdl-mega-footer__middle-section">
    
  </div>
  <div class="mdl-mega-footer__bottom-section">
    <ul class="mdl-mega-footer__link-list">
      
    </ul>
  </div>
</footer>

      </main>
    </div>
  </body>
</html>
